{"uid":"67cd7db726e4f3a3","name":"test_full_navigation_cycle_on_map[chromium-elire]","fullName":"tests.ui.qube.test_qube_map_projects.TestQubeMapProjects#test_full_navigation_cycle_on_map","historyId":"f1e7ef8469499838f56060dda9f59a89","time":{"start":1763643602503,"stop":1763643610114,"duration":7611},"description":"Тест полного цикла навигации: карта -> проект -> карта.","descriptionHtml":"<p>Тест полного цикла навигации: карта -&gt; проект -&gt; карта.</p>\n","status":"failed","statusMessage":"AssertionError: ❌ Не перешли на страницу проекта elire\n   Ожидаемая подстрока: '/elire/'\n   Текущий URL: https://virtualtours.qbd.ae/map","statusTrace":"self = <test_qube_map_projects.TestQubeMapProjects object at 0x000001C836289D50>\nmap_page = <pages.base_page.BasePage object at 0x000001C837685750>\nproject_name = 'elire'\n\n    @allure.story(\"Полный цикл навигации по проектам QUBE\")\n    @pytest.mark.regression\n    @pytest.mark.smoke\n    @allure.severity(allure.severity_level.CRITICAL)\n    @pytest.mark.flaky(reruns=3, reruns_delay=2)\n    @pytest.mark.parametrize(\"project_name\", [\"arisha\", \"elire\", \"cubix\"])\n    @pytest.mark.skipif(\n        os.getenv(\"OS_PLATFORM\") == \"ubuntu-latest\",\n        reason=\"Тест нестабилен на Firefox в CI\",\n    )\n    def test_full_navigation_cycle_on_map(self, map_page, project_name):\n        \"\"\"Тест полного цикла навигации: карта -> проект -> карта.\"\"\"\n        with allure.step(f\"Открываем страницу карты\"):\n            map_page.open(route_type=\"map\")\n            map_page.map.wait_for_map_loaded()\n    \n        with allure.step(f\"Переходим на страницу проекта {project_name}\"):\n            map_page.map.navigate_to_project(project_name)\n            # Проверяем URL проекта\n>           map_page.assertions.assert_url_contains(\n                f\"/{project_name}/\", f\"Не перешли на страницу проекта {project_name}\"\n            )\n\ntests\\ui\\qube\\test_qube_map_projects.py:64: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.core.assertions.Assertions object at 0x000001C837687FD0>\nexpected_substring = '/elire/'\nerror_message = 'Не перешли на страницу проекта elire'\n\n    def assert_url_contains(self, expected_substring: str, error_message: str):\n        \"\"\"\n        Проверить что URL содержит подстроку.\n    \n        Args:\n            expected_substring: Ожидаемая подстрока в URL\n            error_message: Сообщение об ошибке\n        \"\"\"\n        current_url = self.page.url\n>       assert expected_substring in current_url, (\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            f\"❌ {error_message}\\n\"\n            f\"   Ожидаемая подстрока: '{expected_substring}'\\n\"\n            f\"   Текущий URL: {current_url}\"\n        )\nE       AssertionError: ❌ Не перешли на страницу проекта elire\nE          Ожидаемая подстрока: '/elire/'\nE          Текущий URL: https://virtualtours.qbd.ae/map\n\npages\\core\\assertions.py:83: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":3,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1763643111979,"stop":1763643112928,"duration":949},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1763643112928,"stop":1763643112928,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1763643112928,"stop":1763643112928,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_environment","time":{"start":1763643112928,"stop":1763643112930,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1763643112928,"stop":1763643112928,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1763643112928,"stop":1763643112928,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1763643112930,"stop":1763643113399,"duration":469},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1763643113399,"stop":1763643113399,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1763643113399,"stop":1763643113399,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1763643113399,"stop":1763643113618,"duration":219},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1763643113399,"stop":1763643113399,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1763643113399,"stop":1763643113399,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1763643113618,"stop":1763643113626,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1763643113618,"stop":1763643113618,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1763643113626,"stop":1763643113626,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1763643113626,"stop":1763643113626,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1763643602436,"stop":1763643602436,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1763643602436,"stop":1763643602436,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1763643602436,"stop":1763643602443,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1763643602436,"stop":1763643602436,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1763643602443,"stop":1763643602502,"duration":59},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"map_page","time":{"start":1763643602502,"stop":1763643602502,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_test_parameters","time":{"start":1763643602502,"stop":1763643602502,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Тест полного цикла навигации: карта -> проект -> карта.","status":"failed","statusMessage":"AssertionError: ❌ Не перешли на страницу проекта elire\n   Ожидаемая подстрока: '/elire/'\n   Текущий URL: https://virtualtours.qbd.ae/map","statusTrace":"self = <test_qube_map_projects.TestQubeMapProjects object at 0x000001C836289D50>\nmap_page = <pages.base_page.BasePage object at 0x000001C837685750>\nproject_name = 'elire'\n\n    @allure.story(\"Полный цикл навигации по проектам QUBE\")\n    @pytest.mark.regression\n    @pytest.mark.smoke\n    @allure.severity(allure.severity_level.CRITICAL)\n    @pytest.mark.flaky(reruns=3, reruns_delay=2)\n    @pytest.mark.parametrize(\"project_name\", [\"arisha\", \"elire\", \"cubix\"])\n    @pytest.mark.skipif(\n        os.getenv(\"OS_PLATFORM\") == \"ubuntu-latest\",\n        reason=\"Тест нестабилен на Firefox в CI\",\n    )\n    def test_full_navigation_cycle_on_map(self, map_page, project_name):\n        \"\"\"Тест полного цикла навигации: карта -> проект -> карта.\"\"\"\n        with allure.step(f\"Открываем страницу карты\"):\n            map_page.open(route_type=\"map\")\n            map_page.map.wait_for_map_loaded()\n    \n        with allure.step(f\"Переходим на страницу проекта {project_name}\"):\n            map_page.map.navigate_to_project(project_name)\n            # Проверяем URL проекта\n>           map_page.assertions.assert_url_contains(\n                f\"/{project_name}/\", f\"Не перешли на страницу проекта {project_name}\"\n            )\n\ntests\\ui\\qube\\test_qube_map_projects.py:64: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.core.assertions.Assertions object at 0x000001C837687FD0>\nexpected_substring = '/elire/'\nerror_message = 'Не перешли на страницу проекта elire'\n\n    def assert_url_contains(self, expected_substring: str, error_message: str):\n        \"\"\"\n        Проверить что URL содержит подстроку.\n    \n        Args:\n            expected_substring: Ожидаемая подстрока в URL\n            error_message: Сообщение об ошибке\n        \"\"\"\n        current_url = self.page.url\n>       assert expected_substring in current_url, (\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            f\"❌ {error_message}\\n\"\n            f\"   Ожидаемая подстрока: '{expected_substring}'\\n\"\n            f\"   Текущий URL: {current_url}\"\n        )\nE       AssertionError: ❌ Не перешли на страницу проекта elire\nE          Ожидаемая подстрока: '/elire/'\nE          Текущий URL: https://virtualtours.qbd.ae/map\n\npages\\core\\assertions.py:83: AssertionError","steps":[{"name":"Открываем страницу карты","time":{"start":1763643602503,"stop":1763643607851,"duration":5348},"status":"passed","steps":[{"name":"Ожидаем загрузки карты","time":{"start":1763643605350,"stop":1763643607851,"duration":2501},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Переходим на страницу проекта elire","time":{"start":1763643607851,"stop":1763643610112,"duration":2261},"status":"failed","statusMessage":"AssertionError: ❌ Не перешли на страницу проекта elire\n   Ожидаемая подстрока: '/elire/'\n   Текущий URL: https://virtualtours.qbd.ae/map\n","statusTrace":"  File \"D:\\a\\catalog_autotests\\catalog_autotests\\tests\\ui\\qube\\test_qube_map_projects.py\", line 64, in test_full_navigation_cycle_on_map\n    map_page.assertions.assert_url_contains(\n  File \"D:\\a\\catalog_autotests\\catalog_autotests\\pages\\core\\assertions.py\", line 83, in assert_url_contains\n    assert expected_substring in current_url, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"Навигация к проекту ELIRE","time":{"start":1763643607851,"stop":1763643610112,"duration":2261},"status":"passed","steps":[{"name":"Ожидаем загрузки карты","time":{"start":1763643607851,"stop":1763643609877,"duration":2026},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаем на проект ELIRE","time":{"start":1763643609877,"stop":1763643610004,"duration":127},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаем на Explore Project для ELIRE","time":{"start":1763643610004,"stop":1763643610112,"duration":108},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":7,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_test_parameters::0","time":{"start":1763643610125,"stop":1763643610510,"duration":385},"status":"passed","steps":[],"attachments":[{"uid":"39bcc91d7ec90298","name":"screenshot","source":"39bcc91d7ec90298.png","type":"image/png","size":526613}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"new_context::0","time":{"start":1763643610511,"stop":1763643610528,"duration":17},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1763643610529,"stop":1763643610529,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1763643800448,"stop":1763643800448,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1763643800450,"stop":1763643800526,"duration":76},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1763643800528,"stop":1763643800542,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"environment","value":"prod"},{"name":"story","value":"Полный цикл навигации по проектам QUBE"},{"name":"feature","value":"Qube - Карта, навигация и базовые роуты"},{"name":"severity","value":"critical"},{"name":"tag","value":"smoke"},{"name":"tag","value":"regression"},{"name":"tag","value":"ui"},{"name":"parentSuite","value":"tests.ui.qube"},{"name":"suite","value":"test_qube_map_projects"},{"name":"subSuite","value":"TestQubeMapProjects"},{"name":"host","value":"runnervmmu5y5"},{"name":"thread","value":"7040-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.ui.qube.test_qube_map_projects"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"Device","value":"'desktop'"},{"name":"Operating System","value":"'Windows'"},{"name":"Platform","value":"'windows-latest'"},{"name":"browser_name","value":"'chromium'"},{"name":"project_name","value":"'elire'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[{"uid":"5f209c6a7ddaf216","status":"failed","statusDetails":"AssertionError: ❌ Не перешли на страницу проекта elire\n   Ожидаемая подстрока: '/elire/'\n   Текущий URL: https://virtualtours.qbd.ae/map","time":{"start":1763643592883,"stop":1763643599889,"duration":7006}},{"uid":"a2149446b9fd8f8d","status":"failed","statusDetails":"AssertionError: ❌ Не перешли на страницу проекта elire\n   Ожидаемая подстрока: '/elire/'\n   Текущий URL: https://virtualtours.qbd.ae/map","time":{"start":1763643583444,"stop":1763643590253,"duration":6809}},{"uid":"4095a5d99a85c58e","status":"failed","statusDetails":"AssertionError: ❌ Не перешли на страницу проекта elire\n   Ожидаемая подстрока: '/elire/'\n   Текущий URL: https://virtualtours.qbd.ae/map","time":{"start":1763643573459,"stop":1763643581024,"duration":7565}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":75,"unknown":0,"total":76},"items":[{"uid":"45f7fdf2654cd51d","status":"passed","time":{"start":1763642185665,"stop":1763642197165,"duration":11500}},{"uid":"5902b2261ccb4c32","status":"passed","time":{"start":1763626643237,"stop":1763626654614,"duration":11377}},{"uid":"384856ec48f3a995","status":"passed","time":{"start":1763540366623,"stop":1763540378597,"duration":11974}},{"uid":"88896be45397b001","status":"passed","time":{"start":1763496419946,"stop":1763496432346,"duration":12400}},{"uid":"33793ded7c2ca179","status":"passed","time":{"start":1763492882635,"stop":1763492894817,"duration":12182}},{"uid":"cc8a3af7a51d6090","status":"passed","time":{"start":1763466936819,"stop":1763466950592,"duration":13773}},{"uid":"5e25429edb06dce0","status":"passed","time":{"start":1763454061441,"stop":1763454075748,"duration":14307}},{"uid":"e022c49ba6771400","status":"passed","time":{"start":1763367452179,"stop":1763367464063,"duration":11884}},{"uid":"bdb00ae63db61425","status":"passed","time":{"start":1763281179380,"stop":1763281193055,"duration":13675}},{"uid":"c3614f9b45a6fc0a","status":"passed","time":{"start":1763194776430,"stop":1763194790019,"duration":13589}},{"uid":"b3549e9e93793716","status":"passed","time":{"start":1763108242373,"stop":1763108255478,"duration":13105}},{"uid":"988254eece93f97c","status":"passed","time":{"start":1763021849306,"stop":1763021861480,"duration":12174}},{"uid":"3955c187f9ba5784","status":"passed","time":{"start":1762935526679,"stop":1762935539548,"duration":12869}},{"uid":"dd67d02786271361","status":"passed","time":{"start":1762849031710,"stop":1762849045319,"duration":13609}},{"uid":"63b435b215a5069b","status":"passed","time":{"start":1762762662748,"stop":1762762674529,"duration":11781}},{"uid":"12d48f5a96b5e1b3","status":"passed","time":{"start":1762676172708,"stop":1762676184788,"duration":12080}},{"uid":"8bfa51a8af958a80","status":"passed","time":{"start":1762589840548,"stop":1762589854275,"duration":13727}},{"uid":"5004db89800272d9","status":"passed","time":{"start":1762503463166,"stop":1762503474884,"duration":11718}},{"uid":"86e68f6b5fdfeb78","status":"passed","time":{"start":1762417086382,"stop":1762417099866,"duration":13484}},{"uid":"bcc9ee5b029c8dad","status":"passed","time":{"start":1762330653327,"stop":1762330665500,"duration":12173}}]},"tags":["ui","regression","smoke"]},"source":"67cd7db726e4f3a3.json","parameterValues":["'desktop'","'Windows'","'windows-latest'","'chromium'","'elire'"]}