{"uid":"32edde0ef0be465b","name":"test_full_navigation_cycle_on_map[webkit-elire]","fullName":"tests.ui.qube.test_qube_map_projects.TestQubeMapProjects#test_full_navigation_cycle_on_map","historyId":"4ab996ed808caf37949cec6b8ea07981","time":{"start":1763643357565,"stop":1763643365812,"duration":8247},"description":"Тест полного цикла навигации: карта -> проект -> карта.","descriptionHtml":"<p>Тест полного цикла навигации: карта -&gt; проект -&gt; карта.</p>\n","status":"failed","statusMessage":"AssertionError: ❌ Не перешли на страницу проекта elire\n   Ожидаемая подстрока: '/elire/'\n   Текущий URL: https://virtualtours.qbd.ae/map","statusTrace":"self = <test_qube_map_projects.TestQubeMapProjects object at 0x103ce5a10>\nmap_page = <pages.base_page.BasePage object at 0x10414f8d0>\nproject_name = 'elire'\n\n    @allure.story(\"Полный цикл навигации по проектам QUBE\")\n    @pytest.mark.regression\n    @pytest.mark.smoke\n    @allure.severity(allure.severity_level.CRITICAL)\n    @pytest.mark.flaky(reruns=3, reruns_delay=2)\n    @pytest.mark.parametrize(\"project_name\", [\"arisha\", \"elire\", \"cubix\"])\n    @pytest.mark.skipif(\n        os.getenv(\"OS_PLATFORM\") == \"ubuntu-latest\",\n        reason=\"Тест нестабилен на Firefox в CI\",\n    )\n    def test_full_navigation_cycle_on_map(self, map_page, project_name):\n        \"\"\"Тест полного цикла навигации: карта -> проект -> карта.\"\"\"\n        with allure.step(f\"Открываем страницу карты\"):\n            map_page.open(route_type=\"map\")\n            map_page.map.wait_for_map_loaded()\n    \n        with allure.step(f\"Переходим на страницу проекта {project_name}\"):\n            map_page.map.navigate_to_project(project_name)\n            # Проверяем URL проекта\n>           map_page.assertions.assert_url_contains(\n                f\"/{project_name}/\", f\"Не перешли на страницу проекта {project_name}\"\n            )\n\ntests/ui/qube/test_qube_map_projects.py:64: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <pages.core.assertions.Assertions object at 0x10414dd10>\nexpected_substring = '/elire/'\nerror_message = 'Не перешли на страницу проекта elire'\n\n    def assert_url_contains(self, expected_substring: str, error_message: str):\n        \"\"\"\n        Проверить что URL содержит подстроку.\n    \n        Args:\n            expected_substring: Ожидаемая подстрока в URL\n            error_message: Сообщение об ошибке\n        \"\"\"\n        current_url = self.page.url\n>       assert expected_substring in current_url, (\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            f\"❌ {error_message}\\n\"\n            f\"   Ожидаемая подстрока: '{expected_substring}'\\n\"\n            f\"   Текущий URL: {current_url}\"\n        )\nE       AssertionError: ❌ Не перешли на страницу проекта elire\nE          Ожидаемая подстрока: '/elire/'\nE          Текущий URL: https://virtualtours.qbd.ae/map\n\npages/core/assertions.py:83: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":3,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1763642904949,"stop":1763642904949,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1763642904949,"stop":1763642905001,"duration":52},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1763642904949,"stop":1763642904949,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1763642904949,"stop":1763642904949,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1763642904949,"stop":1763642904949,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1763642905002,"stop":1763642905187,"duration":185},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_environment","time":{"start":1763642905002,"stop":1763642905002,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1763642905187,"stop":1763642905187,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1763642905187,"stop":1763642905187,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1763642905188,"stop":1763642905188,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1763642905188,"stop":1763642905188,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1763642905188,"stop":1763642906109,"duration":921},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1763642906109,"stop":1763642906109,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1763642906109,"stop":1763642906109,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1763642906109,"stop":1763642906109,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1763642906109,"stop":1763642906109,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1763643357406,"stop":1763643357407,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1763643357407,"stop":1763643357407,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1763643357407,"stop":1763643357410,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1763643357407,"stop":1763643357407,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1763643357410,"stop":1763643357564,"duration":154},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_test_parameters","time":{"start":1763643357564,"stop":1763643357564,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"map_page","time":{"start":1763643357564,"stop":1763643357564,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Тест полного цикла навигации: карта -> проект -> карта.","status":"failed","statusMessage":"AssertionError: ❌ Не перешли на страницу проекта elire\n   Ожидаемая подстрока: '/elire/'\n   Текущий URL: https://virtualtours.qbd.ae/map","statusTrace":"self = <test_qube_map_projects.TestQubeMapProjects object at 0x103ce5a10>\nmap_page = <pages.base_page.BasePage object at 0x10414f8d0>\nproject_name = 'elire'\n\n    @allure.story(\"Полный цикл навигации по проектам QUBE\")\n    @pytest.mark.regression\n    @pytest.mark.smoke\n    @allure.severity(allure.severity_level.CRITICAL)\n    @pytest.mark.flaky(reruns=3, reruns_delay=2)\n    @pytest.mark.parametrize(\"project_name\", [\"arisha\", \"elire\", \"cubix\"])\n    @pytest.mark.skipif(\n        os.getenv(\"OS_PLATFORM\") == \"ubuntu-latest\",\n        reason=\"Тест нестабилен на Firefox в CI\",\n    )\n    def test_full_navigation_cycle_on_map(self, map_page, project_name):\n        \"\"\"Тест полного цикла навигации: карта -> проект -> карта.\"\"\"\n        with allure.step(f\"Открываем страницу карты\"):\n            map_page.open(route_type=\"map\")\n            map_page.map.wait_for_map_loaded()\n    \n        with allure.step(f\"Переходим на страницу проекта {project_name}\"):\n            map_page.map.navigate_to_project(project_name)\n            # Проверяем URL проекта\n>           map_page.assertions.assert_url_contains(\n                f\"/{project_name}/\", f\"Не перешли на страницу проекта {project_name}\"\n            )\n\ntests/ui/qube/test_qube_map_projects.py:64: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <pages.core.assertions.Assertions object at 0x10414dd10>\nexpected_substring = '/elire/'\nerror_message = 'Не перешли на страницу проекта elire'\n\n    def assert_url_contains(self, expected_substring: str, error_message: str):\n        \"\"\"\n        Проверить что URL содержит подстроку.\n    \n        Args:\n            expected_substring: Ожидаемая подстрока в URL\n            error_message: Сообщение об ошибке\n        \"\"\"\n        current_url = self.page.url\n>       assert expected_substring in current_url, (\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            f\"❌ {error_message}\\n\"\n            f\"   Ожидаемая подстрока: '{expected_substring}'\\n\"\n            f\"   Текущий URL: {current_url}\"\n        )\nE       AssertionError: ❌ Не перешли на страницу проекта elire\nE          Ожидаемая подстрока: '/elire/'\nE          Текущий URL: https://virtualtours.qbd.ae/map\n\npages/core/assertions.py:83: AssertionError","steps":[{"name":"Открываем страницу карты","time":{"start":1763643357565,"stop":1763643363593,"duration":6028},"status":"passed","steps":[{"name":"Ожидаем загрузки карты","time":{"start":1763643361521,"stop":1763643363593,"duration":2072},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Переходим на страницу проекта elire","time":{"start":1763643363593,"stop":1763643365811,"duration":2218},"status":"failed","statusMessage":"AssertionError: ❌ Не перешли на страницу проекта elire\n   Ожидаемая подстрока: '/elire/'\n   Текущий URL: https://virtualtours.qbd.ae/map\n","statusTrace":"  File \"/Users/runner/work/catalog_autotests/catalog_autotests/tests/ui/qube/test_qube_map_projects.py\", line 64, in test_full_navigation_cycle_on_map\n    map_page.assertions.assert_url_contains(\n  File \"/Users/runner/work/catalog_autotests/catalog_autotests/pages/core/assertions.py\", line 83, in assert_url_contains\n    assert expected_substring in current_url, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"Навигация к проекту ELIRE","time":{"start":1763643363593,"stop":1763643365811,"duration":2218},"status":"passed","steps":[{"name":"Ожидаем загрузки карты","time":{"start":1763643363593,"stop":1763643365607,"duration":2014},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаем на проект ELIRE","time":{"start":1763643365607,"stop":1763643365690,"duration":83},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаем на Explore Project для ELIRE","time":{"start":1763643365690,"stop":1763643365811,"duration":121},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":7,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_test_parameters::0","time":{"start":1763643365819,"stop":1763643366005,"duration":186},"status":"passed","steps":[],"attachments":[{"uid":"84bfe0ddc3ef9328","name":"screenshot","source":"84bfe0ddc3ef9328.png","type":"image/png","size":96072}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"new_context::0","time":{"start":1763643366008,"stop":1763643366036,"duration":28},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1763643366038,"stop":1763643366038,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1763643552046,"stop":1763643552047,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1763643552048,"stop":1763643552076,"duration":28},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1763643552081,"stop":1763643552107,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"environment","value":"prod"},{"name":"severity","value":"critical"},{"name":"feature","value":"Qube - Карта, навигация и базовые роуты"},{"name":"story","value":"Полный цикл навигации по проектам QUBE"},{"name":"tag","value":"smoke"},{"name":"tag","value":"regression"},{"name":"tag","value":"ui"},{"name":"parentSuite","value":"tests.ui.qube"},{"name":"suite","value":"test_qube_map_projects"},{"name":"subSuite","value":"TestQubeMapProjects"},{"name":"host","value":"iad20-eo1211-7025a05b-e6d4-4434-92d7-6885bfde98ad-6238B52C6328.local"},{"name":"thread","value":"2420-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.ui.qube.test_qube_map_projects"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"Device","value":"'desktop'"},{"name":"Operating System","value":"'macOS'"},{"name":"Platform","value":"'macos-latest'"},{"name":"browser_name","value":"'webkit'"},{"name":"project_name","value":"'elire'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[{"uid":"fc820aa7686058ca","status":"failed","statusDetails":"AssertionError: ❌ Не перешли на страницу проекта elire\n   Ожидаемая подстрока: '/elire/'\n   Текущий URL: https://virtualtours.qbd.ae/map","time":{"start":1763643347610,"stop":1763643355184,"duration":7574}},{"uid":"9afc1dc3d35bab0a","status":"failed","statusDetails":"AssertionError: ❌ Не перешли на страницу проекта elire\n   Ожидаемая подстрока: '/elire/'\n   Текущий URL: https://virtualtours.qbd.ae/map","time":{"start":1763643337581,"stop":1763643345100,"duration":7519}},{"uid":"6c9f340f2671f846","status":"failed","statusDetails":"AssertionError: ❌ Не перешли на страницу проекта elire\n   Ожидаемая подстрока: '/elire/'\n   Текущий URL: https://virtualtours.qbd.ae/map","time":{"start":1763643326887,"stop":1763643335108,"duration":8221}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":1,"skipped":0,"passed":74,"unknown":0,"total":76},"items":[{"uid":"b55b136471f01f9d","status":"passed","time":{"start":1763641961382,"stop":1763641975689,"duration":14307}},{"uid":"f0c96e2e73674b85","status":"passed","time":{"start":1763626477932,"stop":1763626491254,"duration":13322}},{"uid":"8e6e6c4b01239382","status":"passed","time":{"start":1763540127458,"stop":1763540141132,"duration":13674}},{"uid":"e1ef9625b685cfea","status":"passed","time":{"start":1763496167263,"stop":1763496179941,"duration":12678}},{"uid":"16022a40f39001e2","status":"passed","time":{"start":1763492526819,"stop":1763492539841,"duration":13022}},{"uid":"8aaffced80a7f898","status":"passed","time":{"start":1763466497317,"stop":1763466509667,"duration":12350}},{"uid":"508af2e6afcc70d0","status":"passed","time":{"start":1763453802366,"stop":1763453816417,"duration":14051}},{"uid":"f955f7faf18844fd","status":"passed","time":{"start":1763367244175,"stop":1763367257120,"duration":12945}},{"uid":"1f9b1b644dada73","status":"passed","time":{"start":1763280766001,"stop":1763280780063,"duration":14062}},{"uid":"483f46412963ab9e","status":"passed","time":{"start":1763194356646,"stop":1763194369680,"duration":13034}},{"uid":"a89a9385bad6b0ea","status":"passed","time":{"start":1763108032217,"stop":1763108045237,"duration":13020}},{"uid":"f5ee863d9584b5e8","status":"passed","time":{"start":1763021692543,"stop":1763021707201,"duration":14658}},{"uid":"8c45d6b4fb171fe0","status":"passed","time":{"start":1762935278275,"stop":1762935291623,"duration":13348}},{"uid":"c641f9bddc195331","status":"passed","time":{"start":1762848794203,"stop":1762848805884,"duration":11681}},{"uid":"eb21118c4bee1024","status":"passed","time":{"start":1762762427385,"stop":1762762439520,"duration":12135}},{"uid":"6f4b748cf9e686a9","status":"passed","time":{"start":1762675937796,"stop":1762675949794,"duration":11998}},{"uid":"4905ba48bf4713ff","status":"passed","time":{"start":1762589532717,"stop":1762589545294,"duration":12577}},{"uid":"8efb3d01cef0cdaf","status":"passed","time":{"start":1762503226816,"stop":1762503239112,"duration":12296}},{"uid":"e419a0ee635b3a9a","status":"passed","time":{"start":1762416911884,"stop":1762416925742,"duration":13858}},{"uid":"c76c8f406e86b687","status":"passed","time":{"start":1762330365886,"stop":1762330379518,"duration":13632}}]},"tags":["ui","regression","smoke"]},"source":"32edde0ef0be465b.json","parameterValues":["'desktop'","'macOS'","'macos-latest'","'webkit'","'elire'"]}