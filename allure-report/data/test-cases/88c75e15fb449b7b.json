{"uid":"88c75e15fb449b7b","name":"test_full_navigation_cycle_on_map[chromium-arisha]","fullName":"tests.ui.qube.test_qube_map_projects.TestQubeMapProjects#test_full_navigation_cycle_on_map","historyId":"49dcee112184f86391e7ade43d1217bf","time":{"start":1763643375494,"stop":1763643382635,"duration":7141},"description":"Тест полного цикла навигации: карта -> проект -> карта.","descriptionHtml":"<p>Тест полного цикла навигации: карта -&gt; проект -&gt; карта.</p>\n","status":"failed","statusMessage":"AssertionError: ❌ Не перешли на страницу проекта arisha\n   Ожидаемая подстрока: '/arisha/'\n   Текущий URL: https://virtualtours.qbd.ae/map","statusTrace":"self = <test_qube_map_projects.TestQubeMapProjects object at 0x000001C8362894D0>\nmap_page = <pages.base_page.BasePage object at 0x000001C83634EE50>\nproject_name = 'arisha'\n\n    @allure.story(\"Полный цикл навигации по проектам QUBE\")\n    @pytest.mark.regression\n    @pytest.mark.smoke\n    @allure.severity(allure.severity_level.CRITICAL)\n    @pytest.mark.flaky(reruns=3, reruns_delay=2)\n    @pytest.mark.parametrize(\"project_name\", [\"arisha\", \"elire\", \"cubix\"])\n    @pytest.mark.skipif(\n        os.getenv(\"OS_PLATFORM\") == \"ubuntu-latest\",\n        reason=\"Тест нестабилен на Firefox в CI\",\n    )\n    def test_full_navigation_cycle_on_map(self, map_page, project_name):\n        \"\"\"Тест полного цикла навигации: карта -> проект -> карта.\"\"\"\n        with allure.step(f\"Открываем страницу карты\"):\n            map_page.open(route_type=\"map\")\n            map_page.map.wait_for_map_loaded()\n    \n        with allure.step(f\"Переходим на страницу проекта {project_name}\"):\n            map_page.map.navigate_to_project(project_name)\n            # Проверяем URL проекта\n>           map_page.assertions.assert_url_contains(\n                f\"/{project_name}/\", f\"Не перешли на страницу проекта {project_name}\"\n            )\n\ntests\\ui\\qube\\test_qube_map_projects.py:64: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.core.assertions.Assertions object at 0x000001C83634CB50>\nexpected_substring = '/arisha/'\nerror_message = 'Не перешли на страницу проекта arisha'\n\n    def assert_url_contains(self, expected_substring: str, error_message: str):\n        \"\"\"\n        Проверить что URL содержит подстроку.\n    \n        Args:\n            expected_substring: Ожидаемая подстрока в URL\n            error_message: Сообщение об ошибке\n        \"\"\"\n        current_url = self.page.url\n>       assert expected_substring in current_url, (\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            f\"❌ {error_message}\\n\"\n            f\"   Ожидаемая подстрока: '{expected_substring}'\\n\"\n            f\"   Текущий URL: {current_url}\"\n        )\nE       AssertionError: ❌ Не перешли на страницу проекта arisha\nE          Ожидаемая подстрока: '/arisha/'\nE          Текущий URL: https://virtualtours.qbd.ae/map\n\npages\\core\\assertions.py:83: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":3,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1763643111979,"stop":1763643112928,"duration":949},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1763643112928,"stop":1763643112928,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1763643112928,"stop":1763643112928,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_environment","time":{"start":1763643112928,"stop":1763643112930,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1763643112928,"stop":1763643112928,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1763643112928,"stop":1763643112928,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1763643112930,"stop":1763643113399,"duration":469},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1763643113399,"stop":1763643113399,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1763643113399,"stop":1763643113399,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1763643113399,"stop":1763643113618,"duration":219},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1763643113399,"stop":1763643113399,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1763643113399,"stop":1763643113399,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1763643113618,"stop":1763643113626,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1763643113618,"stop":1763643113618,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1763643113626,"stop":1763643113626,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1763643113626,"stop":1763643113626,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1763643375434,"stop":1763643375442,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1763643375434,"stop":1763643375434,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1763643375434,"stop":1763643375434,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1763643375434,"stop":1763643375434,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1763643375442,"stop":1763643375494,"duration":52},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"map_page","time":{"start":1763643375494,"stop":1763643375494,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_test_parameters","time":{"start":1763643375494,"stop":1763643375494,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Тест полного цикла навигации: карта -> проект -> карта.","status":"failed","statusMessage":"AssertionError: ❌ Не перешли на страницу проекта arisha\n   Ожидаемая подстрока: '/arisha/'\n   Текущий URL: https://virtualtours.qbd.ae/map","statusTrace":"self = <test_qube_map_projects.TestQubeMapProjects object at 0x000001C8362894D0>\nmap_page = <pages.base_page.BasePage object at 0x000001C83634EE50>\nproject_name = 'arisha'\n\n    @allure.story(\"Полный цикл навигации по проектам QUBE\")\n    @pytest.mark.regression\n    @pytest.mark.smoke\n    @allure.severity(allure.severity_level.CRITICAL)\n    @pytest.mark.flaky(reruns=3, reruns_delay=2)\n    @pytest.mark.parametrize(\"project_name\", [\"arisha\", \"elire\", \"cubix\"])\n    @pytest.mark.skipif(\n        os.getenv(\"OS_PLATFORM\") == \"ubuntu-latest\",\n        reason=\"Тест нестабилен на Firefox в CI\",\n    )\n    def test_full_navigation_cycle_on_map(self, map_page, project_name):\n        \"\"\"Тест полного цикла навигации: карта -> проект -> карта.\"\"\"\n        with allure.step(f\"Открываем страницу карты\"):\n            map_page.open(route_type=\"map\")\n            map_page.map.wait_for_map_loaded()\n    \n        with allure.step(f\"Переходим на страницу проекта {project_name}\"):\n            map_page.map.navigate_to_project(project_name)\n            # Проверяем URL проекта\n>           map_page.assertions.assert_url_contains(\n                f\"/{project_name}/\", f\"Не перешли на страницу проекта {project_name}\"\n            )\n\ntests\\ui\\qube\\test_qube_map_projects.py:64: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.core.assertions.Assertions object at 0x000001C83634CB50>\nexpected_substring = '/arisha/'\nerror_message = 'Не перешли на страницу проекта arisha'\n\n    def assert_url_contains(self, expected_substring: str, error_message: str):\n        \"\"\"\n        Проверить что URL содержит подстроку.\n    \n        Args:\n            expected_substring: Ожидаемая подстрока в URL\n            error_message: Сообщение об ошибке\n        \"\"\"\n        current_url = self.page.url\n>       assert expected_substring in current_url, (\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            f\"❌ {error_message}\\n\"\n            f\"   Ожидаемая подстрока: '{expected_substring}'\\n\"\n            f\"   Текущий URL: {current_url}\"\n        )\nE       AssertionError: ❌ Не перешли на страницу проекта arisha\nE          Ожидаемая подстрока: '/arisha/'\nE          Текущий URL: https://virtualtours.qbd.ae/map\n\npages\\core\\assertions.py:83: AssertionError","steps":[{"name":"Открываем страницу карты","time":{"start":1763643375494,"stop":1763643380400,"duration":4906},"status":"passed","steps":[{"name":"Ожидаем загрузки карты","time":{"start":1763643377992,"stop":1763643380400,"duration":2408},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Переходим на страницу проекта arisha","time":{"start":1763643380400,"stop":1763643382634,"duration":2234},"status":"failed","statusMessage":"AssertionError: ❌ Не перешли на страницу проекта arisha\n   Ожидаемая подстрока: '/arisha/'\n   Текущий URL: https://virtualtours.qbd.ae/map\n","statusTrace":"  File \"D:\\a\\catalog_autotests\\catalog_autotests\\tests\\ui\\qube\\test_qube_map_projects.py\", line 64, in test_full_navigation_cycle_on_map\n    map_page.assertions.assert_url_contains(\n  File \"D:\\a\\catalog_autotests\\catalog_autotests\\pages\\core\\assertions.py\", line 83, in assert_url_contains\n    assert expected_substring in current_url, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"Навигация к проекту ARISHA","time":{"start":1763643380400,"stop":1763643382634,"duration":2234},"status":"passed","steps":[{"name":"Ожидаем загрузки карты","time":{"start":1763643380400,"stop":1763643382426,"duration":2026},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаем на проект ARISHA","time":{"start":1763643382426,"stop":1763643382533,"duration":107},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаем на Explore Project для ARISHA","time":{"start":1763643382533,"stop":1763643382634,"duration":101},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":7,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_test_parameters::0","time":{"start":1763643382645,"stop":1763643382974,"duration":329},"status":"passed","steps":[],"attachments":[{"uid":"a38dce71b3d8c192","name":"screenshot","source":"a38dce71b3d8c192.png","type":"image/png","size":685818}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"new_context::0","time":{"start":1763643382976,"stop":1763643382992,"duration":16},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1763643382994,"stop":1763643382994,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1763643800448,"stop":1763643800448,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1763643800450,"stop":1763643800526,"duration":76},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1763643800528,"stop":1763643800542,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"environment","value":"prod"},{"name":"story","value":"Полный цикл навигации по проектам QUBE"},{"name":"feature","value":"Qube - Карта, навигация и базовые роуты"},{"name":"severity","value":"critical"},{"name":"tag","value":"smoke"},{"name":"tag","value":"regression"},{"name":"tag","value":"ui"},{"name":"parentSuite","value":"tests.ui.qube"},{"name":"suite","value":"test_qube_map_projects"},{"name":"subSuite","value":"TestQubeMapProjects"},{"name":"host","value":"runnervmmu5y5"},{"name":"thread","value":"7040-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.ui.qube.test_qube_map_projects"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"Device","value":"'desktop'"},{"name":"Operating System","value":"'Windows'"},{"name":"Platform","value":"'windows-latest'"},{"name":"browser_name","value":"'chromium'"},{"name":"project_name","value":"'arisha'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[{"uid":"a5df04d44ab6d165","status":"failed","statusDetails":"AssertionError: ❌ Не перешли на страницу проекта arisha\n   Ожидаемая подстрока: '/arisha/'\n   Текущий URL: https://virtualtours.qbd.ae/map","time":{"start":1763643365033,"stop":1763643373041,"duration":8008}},{"uid":"3a515776dc626142","status":"failed","statusDetails":"AssertionError: ❌ Не перешли на страницу проекта arisha\n   Ожидаемая подстрока: '/arisha/'\n   Текущий URL: https://virtualtours.qbd.ae/map","time":{"start":1763643353901,"stop":1763643362606,"duration":8705}},{"uid":"9f727680348fed2a","status":"failed","statusDetails":"AssertionError: ❌ Не перешли на страницу проекта arisha\n   Ожидаемая подстрока: '/arisha/'\n   Текущий URL: https://virtualtours.qbd.ae/map","time":{"start":1763643343940,"stop":1763643351484,"duration":7544}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":1,"skipped":0,"passed":74,"unknown":0,"total":76},"items":[{"uid":"c4d9e34be0c2a9ce","status":"passed","time":{"start":1763641979004,"stop":1763641991458,"duration":12454}},{"uid":"fc0d1f89aeaddb44","status":"passed","time":{"start":1763626439816,"stop":1763626451760,"duration":11944}},{"uid":"ac505bbea877f03d","status":"passed","time":{"start":1763540147673,"stop":1763540159850,"duration":12177}},{"uid":"9f5a8bc0543f4694","status":"passed","time":{"start":1763496178528,"stop":1763496190881,"duration":12353}},{"uid":"2c19416cdfbfa665","status":"passed","time":{"start":1763492681495,"stop":1763492693770,"duration":12275}},{"uid":"8235d76e7c905517","status":"passed","time":{"start":1763466615433,"stop":1763466629552,"duration":14119}},{"uid":"880ef14ecaa9b25d","status":"passed","time":{"start":1763453753663,"stop":1763453767319,"duration":13656}},{"uid":"8557b0a59cc48696","status":"passed","time":{"start":1763367254609,"stop":1763367266390,"duration":11781}},{"uid":"f913b4674f2b345c","status":"passed","time":{"start":1763280883226,"stop":1763280897192,"duration":13966}},{"uid":"689b877fe73e02a","status":"passed","time":{"start":1763194479471,"stop":1763194492864,"duration":13393}},{"uid":"fbdc80ab4d447e9e","status":"passed","time":{"start":1763108018404,"stop":1763108032472,"duration":14068}},{"uid":"bd17043c6513c30e","status":"passed","time":{"start":1763021632654,"stop":1763021645875,"duration":13221}},{"uid":"e60cd0a03457d103","status":"passed","time":{"start":1762935293877,"stop":1762935307748,"duration":13871}},{"uid":"cd503f8d29cf06f0","status":"passed","time":{"start":1762848804465,"stop":1762848819155,"duration":14690}},{"uid":"62cb0a763570c067","status":"passed","time":{"start":1762762461361,"stop":1762762473247,"duration":11886}},{"uid":"c8eb3662aa63d2df","status":"passed","time":{"start":1762675965251,"stop":1762675977912,"duration":12661}},{"uid":"5803c4941699045b","status":"passed","time":{"start":1762589597474,"stop":1762589611919,"duration":14445}},{"uid":"176a1c2cef36849d","status":"passed","time":{"start":1762503262279,"stop":1762503273934,"duration":11655}},{"uid":"8ea5c26c3a676853","status":"passed","time":{"start":1762416855716,"stop":1762416869771,"duration":14055}},{"uid":"436743f7f66aaaf6","status":"passed","time":{"start":1762330444491,"stop":1762330456702,"duration":12211}}]},"tags":["ui","regression","smoke"]},"source":"88c75e15fb449b7b.json","parameterValues":["'desktop'","'Windows'","'windows-latest'","'chromium'","'arisha'"]}