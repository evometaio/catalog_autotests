{"uid":"d71f86198479118","name":"test_arisha_mobile_apartment_widget_full_functionality[chromium-map]","fullName":"tests.ui.mobile.qube.arisha.test_arisha_mobile_apartment_widget#test_arisha_mobile_apartment_widget_full_functionality","historyId":"7550e86d3ef182df996c6af3050ac552","time":{"start":1763886589297,"stop":1763886600898,"duration":11601},"description":"Тест полного функционала виджета апартамента Arisha на мобильном устройстве на всех роутах.","descriptionHtml":"<p>Тест полного функционала виджета апартамента Arisha на мобильном устройстве на всех роутах.</p>\n","status":"failed","statusMessage":"AssertionError: Apartments не найдены","statusTrace":"mobile_page = <pages.mobile.mobile_page.MobilePage object at 0x00000194CF41E1D0>\nroute_type = 'map'\n\n    @allure.feature(\"Qube - Проект Arisha (mobile)\")\n    @allure.story(\"Виджет апартамента\")\n    @pytest.mark.smoke\n    @pytest.mark.regression\n    @pytest.mark.mobile\n    @pytest.mark.parametrize(\"route_type\", [\"map\", \"agent\", \"client\"])\n    @pytest.mark.flaky(reruns=2, reruns_delay=2)\n    def test_arisha_mobile_apartment_widget_full_functionality(mobile_page, route_type):\n        \"\"\"Тест полного функционала виджета апартамента Arisha на мобильном устройстве на всех роутах.\"\"\"\n    \n        if route_type == \"client\":\n            pytest.skip(\"Тест нестабилен в CI/CD для client route\")\n    \n        with allure.step(f\"Открываем страницу {route_type} и переходим к проекту Arisha\"):\n            mobile_page.open(route_type=route_type)\n            mobile_page.mobile_map.click_project(\"arisha\")\n    \n        with allure.step(\"Кликаем на Explore Project\"):\n            mobile_page.mobile_map.click_explore_project(\"arisha\")\n    \n        with allure.step(\"Кликаем на All units\"):\n            mobile_page.navigate_to_mobile_arisha_all_units()\n    \n        with allure.step(\"Ищем и кликаем на первый доступный апартамент\"):\n>           mobile_page.mobile_navigation.find_and_click_available_apartment()\n\ntests\\ui\\mobile\\qube\\arisha\\test_arisha_mobile_apartment_widget.py:29: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.mobile.mobile_components.mobile_navigation_component.MobileNavigationComponent object at 0x00000194CF41C810>\n\n    def find_and_click_available_apartment(self):\n        \"\"\"Найти и кликнуть на первый доступный apartment в каталоге.\"\"\"\n        with allure.step(\"Ищем свободный apartment\"):\n            self.page.wait_for_timeout(MOBILE_TIMEOUTS[\"apartment_load\"])\n    \n            # Ищем все apartments\n            apartment_titles = self.page.locator(MOBILE_APARTMENT_SELECTOR)\n            apartment_count = apartment_titles.count()\n    \n            if apartment_count == 0:\n>               raise AssertionError(\"Apartments не найдены\")\nE               AssertionError: Apartments не найдены\n\npages\\mobile\\mobile_components\\mobile_navigation_component.py:324: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1763886534431,"stop":1763886534514,"duration":83},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_environment","time":{"start":1763886534514,"stop":1763886534514,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1763886534514,"stop":1763886534514,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1763886534514,"stop":1763886534514,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1763886534514,"stop":1763886534514,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1763886534514,"stop":1763886534996,"duration":482},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1763886534514,"stop":1763886534514,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1763886534996,"stop":1763886534996,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1763886534996,"stop":1763886534996,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1763886534996,"stop":1763886535169,"duration":173},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1763886534996,"stop":1763886534996,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1763886534996,"stop":1763886534996,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1763886535169,"stop":1763886535171,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1763886535169,"stop":1763886535169,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1763886535171,"stop":1763886535171,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1763886535171,"stop":1763886535171,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1763886589224,"stop":1763886589234,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1763886589224,"stop":1763886589224,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1763886589224,"stop":1763886589224,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1763886589224,"stop":1763886589224,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1763886589234,"stop":1763886589296,"duration":62},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_test_parameters","time":{"start":1763886589296,"stop":1763886589296,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mobile_page","time":{"start":1763886589296,"stop":1763886589297,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Тест полного функционала виджета апартамента Arisha на мобильном устройстве на всех роутах.","status":"failed","statusMessage":"AssertionError: Apartments не найдены","statusTrace":"mobile_page = <pages.mobile.mobile_page.MobilePage object at 0x00000194CF41E1D0>\nroute_type = 'map'\n\n    @allure.feature(\"Qube - Проект Arisha (mobile)\")\n    @allure.story(\"Виджет апартамента\")\n    @pytest.mark.smoke\n    @pytest.mark.regression\n    @pytest.mark.mobile\n    @pytest.mark.parametrize(\"route_type\", [\"map\", \"agent\", \"client\"])\n    @pytest.mark.flaky(reruns=2, reruns_delay=2)\n    def test_arisha_mobile_apartment_widget_full_functionality(mobile_page, route_type):\n        \"\"\"Тест полного функционала виджета апартамента Arisha на мобильном устройстве на всех роутах.\"\"\"\n    \n        if route_type == \"client\":\n            pytest.skip(\"Тест нестабилен в CI/CD для client route\")\n    \n        with allure.step(f\"Открываем страницу {route_type} и переходим к проекту Arisha\"):\n            mobile_page.open(route_type=route_type)\n            mobile_page.mobile_map.click_project(\"arisha\")\n    \n        with allure.step(\"Кликаем на Explore Project\"):\n            mobile_page.mobile_map.click_explore_project(\"arisha\")\n    \n        with allure.step(\"Кликаем на All units\"):\n            mobile_page.navigate_to_mobile_arisha_all_units()\n    \n        with allure.step(\"Ищем и кликаем на первый доступный апартамент\"):\n>           mobile_page.mobile_navigation.find_and_click_available_apartment()\n\ntests\\ui\\mobile\\qube\\arisha\\test_arisha_mobile_apartment_widget.py:29: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.mobile.mobile_components.mobile_navigation_component.MobileNavigationComponent object at 0x00000194CF41C810>\n\n    def find_and_click_available_apartment(self):\n        \"\"\"Найти и кликнуть на первый доступный apartment в каталоге.\"\"\"\n        with allure.step(\"Ищем свободный apartment\"):\n            self.page.wait_for_timeout(MOBILE_TIMEOUTS[\"apartment_load\"])\n    \n            # Ищем все apartments\n            apartment_titles = self.page.locator(MOBILE_APARTMENT_SELECTOR)\n            apartment_count = apartment_titles.count()\n    \n            if apartment_count == 0:\n>               raise AssertionError(\"Apartments не найдены\")\nE               AssertionError: Apartments не найдены\n\npages\\mobile\\mobile_components\\mobile_navigation_component.py:324: AssertionError","steps":[{"name":"Открываем страницу map и переходим к проекту Arisha","time":{"start":1763886589298,"stop":1763886594346,"duration":5048},"status":"passed","steps":[{"name":"Кликаем по проекту ARISHA на мобильном","time":{"start":1763886594203,"stop":1763886594346,"duration":143},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Кликаем на Explore Project","time":{"start":1763886594346,"stop":1763886595855,"duration":1509},"status":"passed","steps":[{"name":"Кликаем на Explore Project для ARISHA","time":{"start":1763886594346,"stop":1763886595855,"duration":1509},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Кликаем на All units","time":{"start":1763886595855,"stop":1763886597386,"duration":1531},"status":"passed","steps":[{"name":"Открываем мобильное меню Arisha","time":{"start":1763886595855,"stop":1763886597290,"duration":1435},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаем на All Units в меню","time":{"start":1763886597290,"stop":1763886597386,"duration":96},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Ищем и кликаем на первый доступный апартамент","time":{"start":1763886597386,"stop":1763886600898,"duration":3512},"status":"failed","statusMessage":"AssertionError: Apartments не найдены\n","statusTrace":"  File \"D:\\a\\catalog_autotests\\catalog_autotests\\tests\\ui\\mobile\\qube\\arisha\\test_arisha_mobile_apartment_widget.py\", line 29, in test_arisha_mobile_apartment_widget_full_functionality\n    mobile_page.mobile_navigation.find_and_click_available_apartment()\n  File \"D:\\a\\catalog_autotests\\catalog_autotests\\pages\\mobile\\mobile_components\\mobile_navigation_component.py\", line 324, in find_and_click_available_apartment\n    raise AssertionError(\"Apartments не найдены\")\n","steps":[{"name":"Ищем свободный apartment","time":{"start":1763886597386,"stop":1763886600898,"duration":3512},"status":"failed","statusMessage":"AssertionError: Apartments не найдены\n","statusTrace":"  File \"D:\\a\\catalog_autotests\\catalog_autotests\\pages\\mobile\\mobile_components\\mobile_navigation_component.py\", line 324, in find_and_click_available_apartment\n    raise AssertionError(\"Apartments не найдены\")\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":9,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_test_parameters::0","time":{"start":1763886600910,"stop":1763886601061,"duration":151},"status":"passed","steps":[],"attachments":[{"uid":"7cbc6822ac5e08ca","name":"screenshot","source":"7cbc6822ac5e08ca.png","type":"image/png","size":27636}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"new_context::0","time":{"start":1763886601063,"stop":1763886601076,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1763886601078,"stop":1763886601078,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1763886934728,"stop":1763886934728,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1763886934730,"stop":1763886934781,"duration":51},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1763886934785,"stop":1763886934796,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"device","value":"pixel_5"},{"name":"environment","value":"prod"},{"name":"story","value":"Виджет апартамента"},{"name":"feature","value":"Qube - Проект Arisha (mobile)"},{"name":"tag","value":"mobile"},{"name":"tag","value":"regression"},{"name":"tag","value":"smoke"},{"name":"parentSuite","value":"tests.ui.mobile.qube.arisha"},{"name":"suite","value":"test_arisha_mobile_apartment_widget"},{"name":"host","value":"runnervmmu5y5"},{"name":"thread","value":"8320-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.ui.mobile.qube.arisha.test_arisha_mobile_apartment_widget"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"Device","value":"'pixel_5'"},{"name":"Operating System","value":"'Windows'"},{"name":"Platform","value":"'Unknown'"},{"name":"Viewport","value":"'393x851'"},{"name":"browser_name","value":"'chromium'"},{"name":"route_type","value":"'map'"}],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["regression","mobile","smoke"]},"source":"d71f86198479118.json","parameterValues":["'pixel_5'","'Windows'","'Unknown'","'393x851'","'chromium'","'map'"]}