{"uid":"fa99fd34f664b0ed","name":"test_arisha_mobile_apartment_widget_full_functionality[chromium-client]","fullName":"tests.ui.mobile.qube.arisha.test_arisha_mobile_apartment_widget#test_arisha_mobile_apartment_widget_full_functionality","historyId":"0494b6ae6d49de5584f233c253036bb2","time":{"start":1760541170332,"stop":1760541222926,"duration":52594},"description":"Тест полного функционала виджета апартамента Arisha на мобильном устройстве на всех роутах.","descriptionHtml":"<p>Тест полного функционала виджета апартамента Arisha на мобильном устройстве на всех роутах.</p>\n","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.\nCall log:\n  - waiting for locator(\"iframe[class*='_iframe_']\").content_frame.locator(\"button:has-text(\\\"2D\\\")\")\n    - locator resolved to <button type=\"button\" class=\"widget-tab-button \">2D</button>\n  - attempting click action\n    2 × waiting for element to be visible, enabled and stable\n      - element is visible, enabled and stable\n      - scrolling into view if needed\n      - done scrolling\n      - <div class=\"ant-modal-content\">…</div> from <div>…</div> subtree intercepts pointer events\n    - retrying click action\n    - waiting 20ms\n    2 × waiting for element to be visible, enabled and stable\n      - element is visible, enabled and stable\n      - scrolling into view if needed\n      - done scrolling\n      - <button type=\"submit\" data-test-id=\"modal-form-primary-button\" class=\"ant-btn css-dev-only-do-not-override-1x0dypw ant-btn-primary ant-btn-color-primary ant-btn-variant-solid _button_jb152_41 _buttonHover_jb152_74\">…</button> from <div>…</div> subtree intercepts pointer events\n    - retrying click action\n      - waiting 100ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <button type=\"submit\" data-test-id=\"modal-form-primary-button\" class=\"ant-btn css-dev-only-do-not-override-1x0dypw ant-btn-primary ant-btn-color-primary ant-btn-variant-solid _button_jb152_41 _buttonHover_jb152_74\">…</button> from <div>…</div> subtree intercepts pointer events\n  - retrying click action\n    - waiting 500ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <div class=\"ant-modal-content\">…</div> from <div>…</div> subtree intercepts pointer events\n  2 × retrying click action\n      - waiting 500ms\n      - waiting for element to be visible, enabled and stable\n      - element is visible, enabled and stable\n      - scrolling into view if needed\n      - done scrolling\n      - <button type=\"submit\" data-test-id=\"modal-form-primary-button\" class=\"ant-btn css-dev-only-do-not-override-1x0dypw ant-btn-primary ant-btn-color-primary ant-btn-variant-solid _button_jb152_41 _buttonHover_jb152_74\">…</button> from <div>…</div> subtree intercepts pointer events\n  - retrying click action\n    - waiting 500ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling","statusTrace":"mobile_page = <pages.mobile.mobile_page.MobilePage object at 0x000002103EBBE310>\nroute_type = 'client'\n\n    @allure.feature(\"Qube - Проект Arisha (mobile)\")\n    @allure.story(\"Виджет апартамента - Мобильная\")\n    @pytest.mark.smoke\n    @pytest.mark.regression\n    @pytest.mark.mobile\n    @pytest.mark.parametrize(\"route_type\", [\"map\", \"agent\", \"client\"])\n    def test_arisha_mobile_apartment_widget_full_functionality(mobile_page, route_type):\n        \"\"\"Тест полного функционала виджета апартамента Arisha на мобильном устройстве на всех роутах.\"\"\"\n    \n        with allure.step(f\"Открываем страницу {route_type} и переходим к проекту Arisha\"):\n            mobile_page.open(route_type=route_type)\n            mobile_page.mobile_map.click_project(\"arisha\")\n    \n        with allure.step(\"Кликаем на Explore Project\"):\n            mobile_page.mobile_map.click_explore_project(\"arisha\")\n    \n        with allure.step(\"Кликаем на All units\"):\n            mobile_page.navigate_to_mobile_arisha_all_units()\n    \n        with allure.step(\"Ищем и кликаем на первый доступный апартамент\"):\n            mobile_page.mobile_navigation.find_and_click_available_apartment()\n    \n        mobile_page.wait_for_apartment_widget_load()\n    \n        with allure.step(\"Кликаем на кнопку 2D\"):\n>           mobile_page.apartment_widget.switch_to_2d_mode()\n\ntests\\ui\\mobile\\qube\\arisha\\test_arisha_mobile_apartment_widget.py:30: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.components.apartment_widget_component.ApartmentWidgetComponent object at 0x000002103EBBE510>\n\n    def switch_to_2d_mode(self):\n        \"\"\"Переключиться в режим 2D.\"\"\"\n        if not self.locators:\n            raise ValueError(\n                f\"Локаторы виджета не найдены для проекта {self.project_name}\"\n            )\n    \n        # Закрываем модалку если она есть (например, на client route)\n        self._close_modal_if_present()\n    \n        with allure.step(\"Переключаемся в режим 2D\"):\n            frame_locator = self.get_widget_frame()\n    \n            view_2d_button = frame_locator.locator(self.locators.VIEW_2D_BUTTON)\n            view_2d_button.wait_for(state=\"visible\", timeout=15000)\n    \n            # Проверяем, что кнопка 2D не активна\n            button_class = view_2d_button.get_attribute(\"class\")\n            if \"active\" in button_class:\n                return  # Уже в режиме 2D\n    \n>           view_2d_button.click()\n\npages\\components\\apartment_widget_component.py:96: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Locator frame=<Frame name= url='https://virtualtours.qbd.ae/client/project/arisha/apartment/1/1/104'> selector='iframe[class*=\\'_iframe_\\'] >> internal:control=enter-frame >> button:has-text(\"2D\")'>\n\n    def click(\n        self,\n        *,\n        modifiers: typing.Optional[\n            typing.Sequence[Literal[\"Alt\", \"Control\", \"ControlOrMeta\", \"Meta\", \"Shift\"]]\n        ] = None,\n        position: typing.Optional[Position] = None,\n        delay: typing.Optional[float] = None,\n        button: typing.Optional[Literal[\"left\", \"middle\", \"right\"]] = None,\n        click_count: typing.Optional[int] = None,\n        timeout: typing.Optional[float] = None,\n        force: typing.Optional[bool] = None,\n        no_wait_after: typing.Optional[bool] = None,\n        trial: typing.Optional[bool] = None,\n    ) -> None:\n        \"\"\"Locator.click\n    \n        Click an element.\n    \n        **Details**\n    \n        This method clicks the element by performing the following steps:\n        1. Wait for [actionability](https://playwright.dev/python/docs/actionability) checks on the element, unless `force` option is set.\n        1. Scroll the element into view if needed.\n        1. Use `page.mouse` to click in the center of the element, or the specified `position`.\n        1. Wait for initiated navigations to either succeed or fail, unless `noWaitAfter` option is set.\n    \n        If the element is detached from the DOM at any moment during the action, this method throws.\n    \n        When all steps combined have not finished during the specified `timeout`, this method throws a `TimeoutError`.\n        Passing zero timeout disables this.\n    \n        **Usage**\n    \n        Click a button:\n    \n        ```py\n        page.get_by_role(\\\"button\\\").click()\n        ```\n    \n        Shift-right-click at a specific position on a canvas:\n    \n        ```py\n        page.locator(\\\"canvas\\\").click(\n            button=\\\"right\\\", modifiers=[\\\"Shift\\\"], position={\\\"x\\\": 23, \\\"y\\\": 32}\n        )\n        ```\n    \n        Parameters\n        ----------\n        modifiers : Union[Sequence[Union[\"Alt\", \"Control\", \"ControlOrMeta\", \"Meta\", \"Shift\"]], None]\n            Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores\n            current modifiers back. If not specified, currently pressed modifiers are used. \"ControlOrMeta\" resolves to\n            \"Control\" on Windows and Linux and to \"Meta\" on macOS.\n        position : Union[{x: float, y: float}, None]\n            A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of\n            the element.\n        delay : Union[float, None]\n            Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.\n        button : Union[\"left\", \"middle\", \"right\", None]\n            Defaults to `left`.\n        click_count : Union[int, None]\n            defaults to 1. See [UIEvent.detail].\n        timeout : Union[float, None]\n            Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can\n            be changed by using the `browser_context.set_default_timeout()` or `page.set_default_timeout()` methods.\n        force : Union[bool, None]\n            Whether to bypass the [actionability](../actionability.md) checks. Defaults to `false`.\n        no_wait_after : Union[bool, None]\n            Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You\n            can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as\n            navigating to inaccessible pages. Defaults to `false`.\n            Deprecated: This option will default to `true` in the future.\n        trial : Union[bool, None]\n            When set, this method only performs the [actionability](../actionability.md) checks and skips the action. Defaults\n            to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard\n            `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys\n            are pressed.\n        \"\"\"\n    \n        return mapping.from_maybe_impl(\n>           self._sync(\n                self._impl_obj.click(\n                    modifiers=mapping.to_impl(modifiers),\n                    position=position,\n                    delay=delay,\n                    button=button,\n                    clickCount=click_count,\n                    timeout=timeout,\n                    force=force,\n                    noWaitAfter=no_wait_after,\n                    trial=trial,\n                )\n            )\n        )\n\nC:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\sync_api\\_generated.py:15524: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Locator frame=<Frame name= url='https://virtualtours.qbd.ae/client/project/arisha/apartment/1/1/104'> selector='iframe[class*=\\'_iframe_\\'] >> internal:control=enter-frame >> button:has-text(\"2D\")'>\nmodifiers = None, position = None, delay = None, button = None\nclickCount = None, timeout = None, force = None, noWaitAfter = None\ntrial = None\n\n    async def click(\n        self,\n        modifiers: Sequence[KeyboardModifier] = None,\n        position: Position = None,\n        delay: float = None,\n        button: MouseButton = None,\n        clickCount: int = None,\n        timeout: float = None,\n        force: bool = None,\n        noWaitAfter: bool = None,\n        trial: bool = None,\n    ) -> None:\n        params = locals_to_params(locals())\n>       return await self._frame.click(self._selector, strict=True, **params)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nC:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\_impl\\_locator.py:160: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Frame name= url='https://virtualtours.qbd.ae/client/project/arisha/apartment/1/1/104'>\nselector = 'iframe[class*=\\'_iframe_\\'] >> internal:control=enter-frame >> button:has-text(\"2D\")'\nmodifiers = None, position = None, delay = None, button = None\nclickCount = None, timeout = None, force = None, noWaitAfter = None\nstrict = True, trial = None\n\n    async def click(\n        self,\n        selector: str,\n        modifiers: Sequence[KeyboardModifier] = None,\n        position: Position = None,\n        delay: float = None,\n        button: MouseButton = None,\n        clickCount: int = None,\n        timeout: float = None,\n        force: bool = None,\n        noWaitAfter: bool = None,\n        strict: bool = None,\n        trial: bool = None,\n    ) -> None:\n>       await self._channel.send(\"click\", self._timeout, locals_to_params(locals()))\n\nC:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\_impl\\_frame.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <playwright._impl._connection.Channel object at 0x000002103ECC49D0>\nmethod = 'click'\ntimeout_calculator = <bound method Frame._timeout of <Frame name= url='https://virtualtours.qbd.ae/client/project/arisha/apartment/1/1/104'>>\nparams = {'selector': 'iframe[class*=\\'_iframe_\\'] >> internal:control=enter-frame >> button:has-text(\"2D\")', 'strict': True, 'timeout': 30000}\nis_internal = False, title = None\n\n    async def send(\n        self,\n        method: str,\n        timeout_calculator: TimeoutCalculator,\n        params: Dict = None,\n        is_internal: bool = False,\n        title: str = None,\n    ) -> Any:\n>       return await self._connection.wrap_api_call(\n            lambda: self._inner_send(method, timeout_calculator, params, False),\n            is_internal,\n            title,\n        )\n\nC:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\_impl\\_connection.py:69: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <playwright._impl._connection.Connection object at 0x000002103E3F7A50>\ncb = <function Channel.send.<locals>.<lambda> at 0x000002103EA22520>\nis_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.\nE           Call log:\nE             - waiting for locator(\"iframe[class*='_iframe_']\").content_frame.locator(\"button:has-text(\\\"2D\\\")\")\nE               - locator resolved to <button type=\"button\" class=\"widget-tab-button \">2D</button>\nE             - attempting click action\nE               2 × waiting for element to be visible, enabled and stable\nE                 - element is visible, enabled and stable\nE                 - scrolling into view if needed\nE                 - done scrolling\nE                 - <div class=\"ant-modal-content\">…</div> from <div>…</div> subtree intercepts pointer events\nE               - retrying click action\nE               - waiting 20ms\nE               2 × waiting for element to be visible, enabled and stable\nE                 - element is visible, enabled and stable\nE                 - scrolling into view if needed\nE                 - done scrolling\nE                 - <button type=\"submit\" data-test-id=\"modal-form-primary-button\" class=\"ant-btn css-dev-only-do-not-override-1x0dypw ant-btn-primary ant-btn-color-primary ant-btn-variant-solid _button_jb152_41 _buttonHover_jb152_74\">…</button> from <div>…</div> subtree intercepts pointer events\nE               - retrying click action\nE                 - waiting 100ms\nE               - waiting for element to be visible, enabled and stable\nE               - element is visible, enabled and stable\nE               - scrolling into view if needed\nE               - done scrolling\nE               - <button type=\"submit\" data-test-id=\"modal-form-primary-button\" class=\"ant-btn css-dev-only-do-not-override-1x0dypw ant-btn-primary ant-btn-color-primary ant-btn-variant-solid _button_jb152_41 _buttonHover_jb152_74\">…</button> from <div>…</div> subtree intercepts pointer events\nE             - retrying click action\nE               - waiting 500ms\nE               - waiting for element to be visible, enabled and stable\nE               - element is visible, enabled and stable\nE               - scrolling into view if needed\nE               - done scrolling\nE               - <div class=\"ant-modal-content\">…</div> from <div>…</div> subtree intercepts pointer events\nE             2 × retrying click action\nE                 - waiting 500ms\nE                 - waiting for element to be visible, enabled and stable\nE                 - element is visible, enabled and stable\nE                 - scrolling into view if needed\nE                 - done scrolling\nE                 - <button type=\"submit\" data-test-id=\"modal-form-primary-button\" class=\"ant-btn css-dev-only-do-not-override-1x0dypw ant-btn-primary ant-btn-color-primary ant-btn-variant-solid _button_jb152_41 _buttonHover_jb152_74\">…</button> from <div>…</div> subtree intercepts pointer events\nE             - retrying click action\nE               - waiting 500ms\nE               - waiting for element to be visible, enabled and stable\nE               - element is visible, enabled and stable\nE               - scrolling into view if needed\nE               - done scrolling\n\nC:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\_impl\\_connection.py:558: TimeoutError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1760540847994,"stop":1760540848075,"duration":81},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1760540848076,"stop":1760540848552,"duration":476},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1760540848076,"stop":1760540848076,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1760540848076,"stop":1760540848076,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_environment","time":{"start":1760540848076,"stop":1760540848076,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1760540848076,"stop":1760540848076,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1760540848076,"stop":1760540848076,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1760540848552,"stop":1760540848552,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1760540848552,"stop":1760540848553,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1760540848553,"stop":1760540848553,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1760540848553,"stop":1760540848727,"duration":174},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1760540848553,"stop":1760540848553,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1760540848728,"stop":1760540848728,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1760540848728,"stop":1760540848728,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1760540848728,"stop":1760540848728,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1760540848728,"stop":1760540848728,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1760541170259,"stop":1760541170261,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1760541170261,"stop":1760541170261,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1760541170261,"stop":1760541170261,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1760541170261,"stop":1760541170270,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1760541170270,"stop":1760541170331,"duration":61},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mobile_page","time":{"start":1760541170331,"stop":1760541170331,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_test_parameters","time":{"start":1760541170331,"stop":1760541170331,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Тест полного функционала виджета апартамента Arisha на мобильном устройстве на всех роутах.","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.\nCall log:\n  - waiting for locator(\"iframe[class*='_iframe_']\").content_frame.locator(\"button:has-text(\\\"2D\\\")\")\n    - locator resolved to <button type=\"button\" class=\"widget-tab-button \">2D</button>\n  - attempting click action\n    2 × waiting for element to be visible, enabled and stable\n      - element is visible, enabled and stable\n      - scrolling into view if needed\n      - done scrolling\n      - <div class=\"ant-modal-content\">…</div> from <div>…</div> subtree intercepts pointer events\n    - retrying click action\n    - waiting 20ms\n    2 × waiting for element to be visible, enabled and stable\n      - element is visible, enabled and stable\n      - scrolling into view if needed\n      - done scrolling\n      - <button type=\"submit\" data-test-id=\"modal-form-primary-button\" class=\"ant-btn css-dev-only-do-not-override-1x0dypw ant-btn-primary ant-btn-color-primary ant-btn-variant-solid _button_jb152_41 _buttonHover_jb152_74\">…</button> from <div>…</div> subtree intercepts pointer events\n    - retrying click action\n      - waiting 100ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <button type=\"submit\" data-test-id=\"modal-form-primary-button\" class=\"ant-btn css-dev-only-do-not-override-1x0dypw ant-btn-primary ant-btn-color-primary ant-btn-variant-solid _button_jb152_41 _buttonHover_jb152_74\">…</button> from <div>…</div> subtree intercepts pointer events\n  - retrying click action\n    - waiting 500ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <div class=\"ant-modal-content\">…</div> from <div>…</div> subtree intercepts pointer events\n  2 × retrying click action\n      - waiting 500ms\n      - waiting for element to be visible, enabled and stable\n      - element is visible, enabled and stable\n      - scrolling into view if needed\n      - done scrolling\n      - <button type=\"submit\" data-test-id=\"modal-form-primary-button\" class=\"ant-btn css-dev-only-do-not-override-1x0dypw ant-btn-primary ant-btn-color-primary ant-btn-variant-solid _button_jb152_41 _buttonHover_jb152_74\">…</button> from <div>…</div> subtree intercepts pointer events\n  - retrying click action\n    - waiting 500ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling","statusTrace":"mobile_page = <pages.mobile.mobile_page.MobilePage object at 0x000002103EBBE310>\nroute_type = 'client'\n\n    @allure.feature(\"Qube - Проект Arisha (mobile)\")\n    @allure.story(\"Виджет апартамента - Мобильная\")\n    @pytest.mark.smoke\n    @pytest.mark.regression\n    @pytest.mark.mobile\n    @pytest.mark.parametrize(\"route_type\", [\"map\", \"agent\", \"client\"])\n    def test_arisha_mobile_apartment_widget_full_functionality(mobile_page, route_type):\n        \"\"\"Тест полного функционала виджета апартамента Arisha на мобильном устройстве на всех роутах.\"\"\"\n    \n        with allure.step(f\"Открываем страницу {route_type} и переходим к проекту Arisha\"):\n            mobile_page.open(route_type=route_type)\n            mobile_page.mobile_map.click_project(\"arisha\")\n    \n        with allure.step(\"Кликаем на Explore Project\"):\n            mobile_page.mobile_map.click_explore_project(\"arisha\")\n    \n        with allure.step(\"Кликаем на All units\"):\n            mobile_page.navigate_to_mobile_arisha_all_units()\n    \n        with allure.step(\"Ищем и кликаем на первый доступный апартамент\"):\n            mobile_page.mobile_navigation.find_and_click_available_apartment()\n    \n        mobile_page.wait_for_apartment_widget_load()\n    \n        with allure.step(\"Кликаем на кнопку 2D\"):\n>           mobile_page.apartment_widget.switch_to_2d_mode()\n\ntests\\ui\\mobile\\qube\\arisha\\test_arisha_mobile_apartment_widget.py:30: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.components.apartment_widget_component.ApartmentWidgetComponent object at 0x000002103EBBE510>\n\n    def switch_to_2d_mode(self):\n        \"\"\"Переключиться в режим 2D.\"\"\"\n        if not self.locators:\n            raise ValueError(\n                f\"Локаторы виджета не найдены для проекта {self.project_name}\"\n            )\n    \n        # Закрываем модалку если она есть (например, на client route)\n        self._close_modal_if_present()\n    \n        with allure.step(\"Переключаемся в режим 2D\"):\n            frame_locator = self.get_widget_frame()\n    \n            view_2d_button = frame_locator.locator(self.locators.VIEW_2D_BUTTON)\n            view_2d_button.wait_for(state=\"visible\", timeout=15000)\n    \n            # Проверяем, что кнопка 2D не активна\n            button_class = view_2d_button.get_attribute(\"class\")\n            if \"active\" in button_class:\n                return  # Уже в режиме 2D\n    \n>           view_2d_button.click()\n\npages\\components\\apartment_widget_component.py:96: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Locator frame=<Frame name= url='https://virtualtours.qbd.ae/client/project/arisha/apartment/1/1/104'> selector='iframe[class*=\\'_iframe_\\'] >> internal:control=enter-frame >> button:has-text(\"2D\")'>\n\n    def click(\n        self,\n        *,\n        modifiers: typing.Optional[\n            typing.Sequence[Literal[\"Alt\", \"Control\", \"ControlOrMeta\", \"Meta\", \"Shift\"]]\n        ] = None,\n        position: typing.Optional[Position] = None,\n        delay: typing.Optional[float] = None,\n        button: typing.Optional[Literal[\"left\", \"middle\", \"right\"]] = None,\n        click_count: typing.Optional[int] = None,\n        timeout: typing.Optional[float] = None,\n        force: typing.Optional[bool] = None,\n        no_wait_after: typing.Optional[bool] = None,\n        trial: typing.Optional[bool] = None,\n    ) -> None:\n        \"\"\"Locator.click\n    \n        Click an element.\n    \n        **Details**\n    \n        This method clicks the element by performing the following steps:\n        1. Wait for [actionability](https://playwright.dev/python/docs/actionability) checks on the element, unless `force` option is set.\n        1. Scroll the element into view if needed.\n        1. Use `page.mouse` to click in the center of the element, or the specified `position`.\n        1. Wait for initiated navigations to either succeed or fail, unless `noWaitAfter` option is set.\n    \n        If the element is detached from the DOM at any moment during the action, this method throws.\n    \n        When all steps combined have not finished during the specified `timeout`, this method throws a `TimeoutError`.\n        Passing zero timeout disables this.\n    \n        **Usage**\n    \n        Click a button:\n    \n        ```py\n        page.get_by_role(\\\"button\\\").click()\n        ```\n    \n        Shift-right-click at a specific position on a canvas:\n    \n        ```py\n        page.locator(\\\"canvas\\\").click(\n            button=\\\"right\\\", modifiers=[\\\"Shift\\\"], position={\\\"x\\\": 23, \\\"y\\\": 32}\n        )\n        ```\n    \n        Parameters\n        ----------\n        modifiers : Union[Sequence[Union[\"Alt\", \"Control\", \"ControlOrMeta\", \"Meta\", \"Shift\"]], None]\n            Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores\n            current modifiers back. If not specified, currently pressed modifiers are used. \"ControlOrMeta\" resolves to\n            \"Control\" on Windows and Linux and to \"Meta\" on macOS.\n        position : Union[{x: float, y: float}, None]\n            A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of\n            the element.\n        delay : Union[float, None]\n            Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.\n        button : Union[\"left\", \"middle\", \"right\", None]\n            Defaults to `left`.\n        click_count : Union[int, None]\n            defaults to 1. See [UIEvent.detail].\n        timeout : Union[float, None]\n            Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can\n            be changed by using the `browser_context.set_default_timeout()` or `page.set_default_timeout()` methods.\n        force : Union[bool, None]\n            Whether to bypass the [actionability](../actionability.md) checks. Defaults to `false`.\n        no_wait_after : Union[bool, None]\n            Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You\n            can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as\n            navigating to inaccessible pages. Defaults to `false`.\n            Deprecated: This option will default to `true` in the future.\n        trial : Union[bool, None]\n            When set, this method only performs the [actionability](../actionability.md) checks and skips the action. Defaults\n            to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard\n            `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys\n            are pressed.\n        \"\"\"\n    \n        return mapping.from_maybe_impl(\n>           self._sync(\n                self._impl_obj.click(\n                    modifiers=mapping.to_impl(modifiers),\n                    position=position,\n                    delay=delay,\n                    button=button,\n                    clickCount=click_count,\n                    timeout=timeout,\n                    force=force,\n                    noWaitAfter=no_wait_after,\n                    trial=trial,\n                )\n            )\n        )\n\nC:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\sync_api\\_generated.py:15524: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Locator frame=<Frame name= url='https://virtualtours.qbd.ae/client/project/arisha/apartment/1/1/104'> selector='iframe[class*=\\'_iframe_\\'] >> internal:control=enter-frame >> button:has-text(\"2D\")'>\nmodifiers = None, position = None, delay = None, button = None\nclickCount = None, timeout = None, force = None, noWaitAfter = None\ntrial = None\n\n    async def click(\n        self,\n        modifiers: Sequence[KeyboardModifier] = None,\n        position: Position = None,\n        delay: float = None,\n        button: MouseButton = None,\n        clickCount: int = None,\n        timeout: float = None,\n        force: bool = None,\n        noWaitAfter: bool = None,\n        trial: bool = None,\n    ) -> None:\n        params = locals_to_params(locals())\n>       return await self._frame.click(self._selector, strict=True, **params)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nC:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\_impl\\_locator.py:160: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Frame name= url='https://virtualtours.qbd.ae/client/project/arisha/apartment/1/1/104'>\nselector = 'iframe[class*=\\'_iframe_\\'] >> internal:control=enter-frame >> button:has-text(\"2D\")'\nmodifiers = None, position = None, delay = None, button = None\nclickCount = None, timeout = None, force = None, noWaitAfter = None\nstrict = True, trial = None\n\n    async def click(\n        self,\n        selector: str,\n        modifiers: Sequence[KeyboardModifier] = None,\n        position: Position = None,\n        delay: float = None,\n        button: MouseButton = None,\n        clickCount: int = None,\n        timeout: float = None,\n        force: bool = None,\n        noWaitAfter: bool = None,\n        strict: bool = None,\n        trial: bool = None,\n    ) -> None:\n>       await self._channel.send(\"click\", self._timeout, locals_to_params(locals()))\n\nC:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\_impl\\_frame.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <playwright._impl._connection.Channel object at 0x000002103ECC49D0>\nmethod = 'click'\ntimeout_calculator = <bound method Frame._timeout of <Frame name= url='https://virtualtours.qbd.ae/client/project/arisha/apartment/1/1/104'>>\nparams = {'selector': 'iframe[class*=\\'_iframe_\\'] >> internal:control=enter-frame >> button:has-text(\"2D\")', 'strict': True, 'timeout': 30000}\nis_internal = False, title = None\n\n    async def send(\n        self,\n        method: str,\n        timeout_calculator: TimeoutCalculator,\n        params: Dict = None,\n        is_internal: bool = False,\n        title: str = None,\n    ) -> Any:\n>       return await self._connection.wrap_api_call(\n            lambda: self._inner_send(method, timeout_calculator, params, False),\n            is_internal,\n            title,\n        )\n\nC:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\_impl\\_connection.py:69: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <playwright._impl._connection.Connection object at 0x000002103E3F7A50>\ncb = <function Channel.send.<locals>.<lambda> at 0x000002103EA22520>\nis_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.\nE           Call log:\nE             - waiting for locator(\"iframe[class*='_iframe_']\").content_frame.locator(\"button:has-text(\\\"2D\\\")\")\nE               - locator resolved to <button type=\"button\" class=\"widget-tab-button \">2D</button>\nE             - attempting click action\nE               2 × waiting for element to be visible, enabled and stable\nE                 - element is visible, enabled and stable\nE                 - scrolling into view if needed\nE                 - done scrolling\nE                 - <div class=\"ant-modal-content\">…</div> from <div>…</div> subtree intercepts pointer events\nE               - retrying click action\nE               - waiting 20ms\nE               2 × waiting for element to be visible, enabled and stable\nE                 - element is visible, enabled and stable\nE                 - scrolling into view if needed\nE                 - done scrolling\nE                 - <button type=\"submit\" data-test-id=\"modal-form-primary-button\" class=\"ant-btn css-dev-only-do-not-override-1x0dypw ant-btn-primary ant-btn-color-primary ant-btn-variant-solid _button_jb152_41 _buttonHover_jb152_74\">…</button> from <div>…</div> subtree intercepts pointer events\nE               - retrying click action\nE                 - waiting 100ms\nE               - waiting for element to be visible, enabled and stable\nE               - element is visible, enabled and stable\nE               - scrolling into view if needed\nE               - done scrolling\nE               - <button type=\"submit\" data-test-id=\"modal-form-primary-button\" class=\"ant-btn css-dev-only-do-not-override-1x0dypw ant-btn-primary ant-btn-color-primary ant-btn-variant-solid _button_jb152_41 _buttonHover_jb152_74\">…</button> from <div>…</div> subtree intercepts pointer events\nE             - retrying click action\nE               - waiting 500ms\nE               - waiting for element to be visible, enabled and stable\nE               - element is visible, enabled and stable\nE               - scrolling into view if needed\nE               - done scrolling\nE               - <div class=\"ant-modal-content\">…</div> from <div>…</div> subtree intercepts pointer events\nE             2 × retrying click action\nE                 - waiting 500ms\nE                 - waiting for element to be visible, enabled and stable\nE                 - element is visible, enabled and stable\nE                 - scrolling into view if needed\nE                 - done scrolling\nE                 - <button type=\"submit\" data-test-id=\"modal-form-primary-button\" class=\"ant-btn css-dev-only-do-not-override-1x0dypw ant-btn-primary ant-btn-color-primary ant-btn-variant-solid _button_jb152_41 _buttonHover_jb152_74\">…</button> from <div>…</div> subtree intercepts pointer events\nE             - retrying click action\nE               - waiting 500ms\nE               - waiting for element to be visible, enabled and stable\nE               - element is visible, enabled and stable\nE               - scrolling into view if needed\nE               - done scrolling\n\nC:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\_impl\\_connection.py:558: TimeoutError","steps":[{"name":"Открываем страницу client и переходим к проекту Arisha","time":{"start":1760541170332,"stop":1760541174019,"duration":3687},"status":"passed","steps":[{"name":"Кликаем по проекту ARISHA на мобильном","time":{"start":1760541173803,"stop":1760541174019,"duration":216},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Кликаем на Explore Project","time":{"start":1760541174019,"stop":1760541175192,"duration":1173},"status":"passed","steps":[{"name":"Кликаем на Explore Project для ARISHA","time":{"start":1760541174019,"stop":1760541175192,"duration":1173},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Кликаем на All units","time":{"start":1760541175192,"stop":1760541176999,"duration":1807},"status":"passed","steps":[{"name":"Открываем мобильное меню Arisha","time":{"start":1760541175192,"stop":1760541176569,"duration":1377},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаем на All Units в меню","time":{"start":1760541176569,"stop":1760541176999,"duration":430},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Ищем и кликаем на первый доступный апартамент","time":{"start":1760541176999,"stop":1760541185579,"duration":8580},"status":"passed","steps":[{"name":"Ищем свободный apartment","time":{"start":1760541176999,"stop":1760541185579,"duration":8580},"status":"passed","steps":[{"name":"Кликаем на доступный apartment 1","time":{"start":1760541180525,"stop":1760541185579,"duration":5054},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Ожидаем полной загрузки виджета апартамента","time":{"start":1760541185579,"stop":1760541190117,"duration":4538},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаем на кнопку 2D","time":{"start":1760541190117,"stop":1760541222925,"duration":32808},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.\nCall log:\n  - waiting for locator(\"iframe[class*='_iframe_']\").content_frame.locator(\"button:has-text(\\\"2D\\\")\")\n    - locator resolved to <button type=\"button\" class=\"widget-tab-button \">2D</button>\n  - attempting click action\n    2 × waiting for element to be visible, enabled and stable\n      - element is visible, enabled and stable\n      - scrolling into view if needed\n      - done scrolling\n      - <div class=\"ant-modal-content\">…</div> from <div>…</div> subtree intercepts pointer events\n    - retrying click action\n    - waiting 20ms\n    2 × waiting for element to be visible, enabled and stable\n      - element is visible, enabled and stable\n      - scrolling into view if needed\n      - done scrolling\n      - <button type=\"submit\" data-test-id=\"modal-form-primary-button\" class=\"ant-btn css-dev-only-do-not-override-1x0dypw ant-btn-primary ant-btn-color-primary ant-btn-variant-solid _button_jb152_41 _buttonHover_jb152_74\">…</button> from <div>…</div> subtree intercepts pointer events\n    - retrying click action\n      - waiting 100ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <button type=\"submit\" data-test-id=\"modal-form-primary-button\" class=\"ant-btn css-dev-only-do-not-override-1x0dypw ant-btn-primary ant-btn-color-primary ant-btn-variant-solid _button_jb152_41 _buttonHover_jb152_74\">…</button> from <div>…</div> subtree intercepts pointer events\n  - retrying click action\n    - waiting 500ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <div class=\"ant-modal-content\">…</div> from <div>…</div> subtree intercepts pointer events\n  2 × retrying click action\n      - waiting 500ms\n      - waiting for element to be visible, enabled and stable\n      - element is visible, enabled and stable\n      - scrolling into view if needed\n      - done scrolling\n      - <button type=\"submit\" data-test-id=\"modal-form-primary-button\" class=\"ant-btn css-dev-only-do-not-override-1x0dypw ant-btn-primary ant-btn-color-primary ant-btn-variant-solid _button_jb152_41 _buttonHover_jb152_74\">…</button> from <div>…</div> subtree intercepts pointer events\n  - retrying click action\n    - waiting 500ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n\n","statusTrace":"  File \"D:\\a\\catalog_autotests\\catalog_autotests\\tests\\ui\\mobile\\qube\\arisha\\test_arisha_mobile_apartment_widget.py\", line 30, in test_arisha_mobile_apartment_widget_full_functionality\n    mobile_page.apartment_widget.switch_to_2d_mode()\n  File \"D:\\a\\catalog_autotests\\catalog_autotests\\pages\\components\\apartment_widget_component.py\", line 96, in switch_to_2d_mode\n    view_2d_button.click()\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\sync_api\\_generated.py\", line 15524, in click\n    self._sync(\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\_impl\\_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\_impl\\_locator.py\", line 160, in click\n    return await self._frame.click(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\_impl\\_frame.py\", line 549, in click\n    await self._channel.send(\"click\", self._timeout, locals_to_params(locals()))\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\_impl\\_connection.py\", line 69, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\_impl\\_connection.py\", line 558, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n","steps":[{"name":"Переключаемся в режим 2D","time":{"start":1760541190135,"stop":1760541222922,"duration":32787},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.\nCall log:\n  - waiting for locator(\"iframe[class*='_iframe_']\").content_frame.locator(\"button:has-text(\\\"2D\\\")\")\n    - locator resolved to <button type=\"button\" class=\"widget-tab-button \">2D</button>\n  - attempting click action\n    2 × waiting for element to be visible, enabled and stable\n      - element is visible, enabled and stable\n      - scrolling into view if needed\n      - done scrolling\n      - <div class=\"ant-modal-content\">…</div> from <div>…</div> subtree intercepts pointer events\n    - retrying click action\n    - waiting 20ms\n    2 × waiting for element to be visible, enabled and stable\n      - element is visible, enabled and stable\n      - scrolling into view if needed\n      - done scrolling\n      - <button type=\"submit\" data-test-id=\"modal-form-primary-button\" class=\"ant-btn css-dev-only-do-not-override-1x0dypw ant-btn-primary ant-btn-color-primary ant-btn-variant-solid _button_jb152_41 _buttonHover_jb152_74\">…</button> from <div>…</div> subtree intercepts pointer events\n    - retrying click action\n      - waiting 100ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <button type=\"submit\" data-test-id=\"modal-form-primary-button\" class=\"ant-btn css-dev-only-do-not-override-1x0dypw ant-btn-primary ant-btn-color-primary ant-btn-variant-solid _button_jb152_41 _buttonHover_jb152_74\">…</button> from <div>…</div> subtree intercepts pointer events\n  - retrying click action\n    - waiting 500ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <div class=\"ant-modal-content\">…</div> from <div>…</div> subtree intercepts pointer events\n  2 × retrying click action\n      - waiting 500ms\n      - waiting for element to be visible, enabled and stable\n      - element is visible, enabled and stable\n      - scrolling into view if needed\n      - done scrolling\n      - <button type=\"submit\" data-test-id=\"modal-form-primary-button\" class=\"ant-btn css-dev-only-do-not-override-1x0dypw ant-btn-primary ant-btn-color-primary ant-btn-variant-solid _button_jb152_41 _buttonHover_jb152_74\">…</button> from <div>…</div> subtree intercepts pointer events\n  - retrying click action\n    - waiting 500ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n\n","statusTrace":"  File \"D:\\a\\catalog_autotests\\catalog_autotests\\pages\\components\\apartment_widget_component.py\", line 96, in switch_to_2d_mode\n    view_2d_button.click()\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\sync_api\\_generated.py\", line 15524, in click\n    self._sync(\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\_impl\\_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\_impl\\_locator.py\", line 160, in click\n    return await self._frame.click(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\_impl\\_frame.py\", line 549, in click\n    await self._channel.send(\"click\", self._timeout, locals_to_params(locals()))\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\_impl\\_connection.py\", line 69, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.11.9\\x64\\Lib\\site-packages\\playwright\\_impl\\_connection.py\", line 558, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":13,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_test_parameters::0","time":{"start":1760541225382,"stop":1760541228421,"duration":3039},"status":"passed","steps":[],"attachments":[{"uid":"97999f260a32b435","name":"screenshot","source":"97999f260a32b435.png","type":"image/png","size":428235}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"new_context::0","time":{"start":1760541228421,"stop":1760541228636,"duration":215},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1760541228637,"stop":1760541228637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1760541298934,"stop":1760541298935,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1760541298936,"stop":1760541298986,"duration":50},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1760541298988,"stop":1760541299006,"duration":18},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"device","value":"iphone_13"},{"name":"environment","value":"prod"},{"name":"story","value":"Виджет апартамента - Мобильная"},{"name":"feature","value":"Qube - Проект Arisha (mobile)"},{"name":"tag","value":"mobile"},{"name":"tag","value":"regression"},{"name":"tag","value":"smoke"},{"name":"parentSuite","value":"tests.ui.mobile.qube.arisha"},{"name":"suite","value":"test_arisha_mobile_apartment_widget"},{"name":"host","value":"runnervmd3hz3"},{"name":"thread","value":"7868-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.ui.mobile.qube.arisha.test_arisha_mobile_apartment_widget"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"Device","value":"'iphone_13'"},{"name":"Operating System","value":"'Windows'"},{"name":"Platform","value":"'Unknown'"},{"name":"Viewport","value":"'390x844'"},{"name":"browser_name","value":"'chromium'"},{"name":"route_type","value":"'client'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":["regression","mobile","smoke"]},"source":"fa99fd34f664b0ed.json","parameterValues":["'iphone_13'","'Windows'","'Unknown'","'390x844'","'chromium'","'client'"]}