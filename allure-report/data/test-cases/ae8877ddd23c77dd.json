{"uid":"ae8877ddd23c77dd","name":"test_arisha_apartment_widget_full_functionality[chromium-agent]","fullName":"tests.ui.qube.arisha.test_arisha_apartment_widget#test_arisha_apartment_widget_full_functionality","historyId":"1f43617d2cd869ae17efdbfa0703852c","time":{"start":1765098332952,"stop":1765098346378,"duration":13426},"description":"Тест полного функционала виджета апартамента Arisha на всех роутах.","descriptionHtml":"<p>Тест полного функционала виджета апартамента Arisha на всех роутах.</p>\n","status":"failed","statusMessage":"AssertionError: Апартаменты не найдены на странице - неизвестный","statusTrace":"arisha_page = <pages.projects.qube.arisha_page.ArishaPage object at 0x00000179DB5D8F90>\nroute_type = 'agent'\n\n    @allure.feature(\"Qube - Проект Arisha\")\n    @allure.story(\"Виджет апартамента - Полный функционал\")\n    @pytest.mark.smoke\n    @pytest.mark.regression\n    @pytest.mark.ui\n    @pytest.mark.flaky(reruns=2, reruns_delay=2)\n    @pytest.mark.skipif(\n        os.getenv(\"OS_PLATFORM\") == \"ubuntu-latest\",\n        reason=\"Тест нестабилен на Firefox в CI\",\n    )\n    @pytest.mark.parametrize(\"route_type\", [\"map\", \"agent\", \"client\"])\n    def test_arisha_apartment_widget_full_functionality(arisha_page, route_type):\n        \"\"\"Тест полного функционала виджета апартамента Arisha на всех роутах.\"\"\"\n    \n        with allure.step(f\"Открываем страницу {route_type} и переходим к проекту Arisha\"):\n            arisha_page.open(route_type=route_type)\n            arisha_page.map.navigate_to_project(\"arisha\")\n    \n        with allure.step(\"Кликаем на кнопку All units\"):\n            arisha_page.click_all_units_button()\n            arisha_page.assertions.assert_url_contains(\n                \"catalog_2d\", \"Не перешли на страницу каталога\"\n            )\n    \n        with allure.step(\"Ищем и кликаем на первый доступный апартамент\"):\n>           arisha_page.navigation.find_and_click_available_apartment()\n\ntests\\ui\\qube\\arisha\\test_arisha_apartment_widget.py:32: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.components.navigation_component.NavigationComponent object at 0x00000179DB5D91D0>\nproject_name = None\n\n    def find_and_click_available_apartment(self, project_name: str = None):\n        \"\"\"\n        Найти и кликнуть на первый доступный апартамент (без замка) в каталоге.\n    \n        Args:\n            project_name: Название проекта (используется только для логирования)\n        \"\"\"\n        with allure.step(\"Ищем доступный апартамент в каталоге\"):\n            self.page.wait_for_timeout(3500)\n    \n            # Ищем все апартаменты\n            apartment_titles = self.page.locator(self.locators.ALL_APARTMENT_TITLES)\n            apartment_count = apartment_titles.count()\n    \n            # Проверяем, что апартаменты найдены на странице\n            assert (\n>               apartment_count > 0\n            ), f\"Апартаменты не найдены на странице - {project_name or 'неизвестный'}\"\nE           AssertionError: Апартаменты не найдены на странице - неизвестный\n\npages\\components\\navigation_component.py:227: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1765097912152,"stop":1765097912319,"duration":167},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1765097912319,"stop":1765097912319,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_environment","time":{"start":1765097912319,"stop":1765097912320,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1765097912319,"stop":1765097912319,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1765097912319,"stop":1765097912319,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1765097912319,"stop":1765097912319,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1765097912320,"stop":1765097912827,"duration":507},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1765097912829,"stop":1765097912829,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1765097912829,"stop":1765097912829,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1765097912829,"stop":1765097912829,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1765097912829,"stop":1765097913009,"duration":180},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1765097912829,"stop":1765097912829,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1765097913009,"stop":1765097913013,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1765097913009,"stop":1765097913009,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1765097913015,"stop":1765097913015,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1765097913015,"stop":1765097913015,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1765098332889,"stop":1765098332889,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1765098332889,"stop":1765098332889,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1765098332889,"stop":1765098332901,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1765098332889,"stop":1765098332889,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1765098332901,"stop":1765098332950,"duration":49},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_test_parameters","time":{"start":1765098332950,"stop":1765098332950,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"arisha_page","time":{"start":1765098332950,"stop":1765098332950,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Тест полного функционала виджета апартамента Arisha на всех роутах.","status":"failed","statusMessage":"AssertionError: Апартаменты не найдены на странице - неизвестный","statusTrace":"arisha_page = <pages.projects.qube.arisha_page.ArishaPage object at 0x00000179DB5D8F90>\nroute_type = 'agent'\n\n    @allure.feature(\"Qube - Проект Arisha\")\n    @allure.story(\"Виджет апартамента - Полный функционал\")\n    @pytest.mark.smoke\n    @pytest.mark.regression\n    @pytest.mark.ui\n    @pytest.mark.flaky(reruns=2, reruns_delay=2)\n    @pytest.mark.skipif(\n        os.getenv(\"OS_PLATFORM\") == \"ubuntu-latest\",\n        reason=\"Тест нестабилен на Firefox в CI\",\n    )\n    @pytest.mark.parametrize(\"route_type\", [\"map\", \"agent\", \"client\"])\n    def test_arisha_apartment_widget_full_functionality(arisha_page, route_type):\n        \"\"\"Тест полного функционала виджета апартамента Arisha на всех роутах.\"\"\"\n    \n        with allure.step(f\"Открываем страницу {route_type} и переходим к проекту Arisha\"):\n            arisha_page.open(route_type=route_type)\n            arisha_page.map.navigate_to_project(\"arisha\")\n    \n        with allure.step(\"Кликаем на кнопку All units\"):\n            arisha_page.click_all_units_button()\n            arisha_page.assertions.assert_url_contains(\n                \"catalog_2d\", \"Не перешли на страницу каталога\"\n            )\n    \n        with allure.step(\"Ищем и кликаем на первый доступный апартамент\"):\n>           arisha_page.navigation.find_and_click_available_apartment()\n\ntests\\ui\\qube\\arisha\\test_arisha_apartment_widget.py:32: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.components.navigation_component.NavigationComponent object at 0x00000179DB5D91D0>\nproject_name = None\n\n    def find_and_click_available_apartment(self, project_name: str = None):\n        \"\"\"\n        Найти и кликнуть на первый доступный апартамент (без замка) в каталоге.\n    \n        Args:\n            project_name: Название проекта (используется только для логирования)\n        \"\"\"\n        with allure.step(\"Ищем доступный апартамент в каталоге\"):\n            self.page.wait_for_timeout(3500)\n    \n            # Ищем все апартаменты\n            apartment_titles = self.page.locator(self.locators.ALL_APARTMENT_TITLES)\n            apartment_count = apartment_titles.count()\n    \n            # Проверяем, что апартаменты найдены на странице\n            assert (\n>               apartment_count > 0\n            ), f\"Апартаменты не найдены на странице - {project_name or 'неизвестный'}\"\nE           AssertionError: Апартаменты не найдены на странице - неизвестный\n\npages\\components\\navigation_component.py:227: AssertionError","steps":[{"name":"Открываем страницу agent и переходим к проекту Arisha","time":{"start":1765098332952,"stop":1765098339437,"duration":6485},"status":"passed","steps":[{"name":"Навигация к проекту ARISHA","time":{"start":1765098335747,"stop":1765098339437,"duration":3690},"status":"passed","steps":[{"name":"Ожидаем загрузки карты","time":{"start":1765098335747,"stop":1765098338224,"duration":2477},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаем на проект ARISHA","time":{"start":1765098338224,"stop":1765098338315,"duration":91},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаем на Explore Project для ARISHA","time":{"start":1765098338315,"stop":1765098339437,"duration":1122},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Кликаем на кнопку All units","time":{"start":1765098339437,"stop":1765098342866,"duration":3429},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Ищем и кликаем на первый доступный апартамент","time":{"start":1765098342866,"stop":1765098346377,"duration":3511},"status":"failed","statusMessage":"AssertionError: Апартаменты не найдены на странице - неизвестный\n","statusTrace":"  File \"D:\\a\\catalog_autotests\\catalog_autotests\\tests\\ui\\qube\\arisha\\test_arisha_apartment_widget.py\", line 32, in test_arisha_apartment_widget_full_functionality\n    arisha_page.navigation.find_and_click_available_apartment()\n  File \"D:\\a\\catalog_autotests\\catalog_autotests\\pages\\components\\navigation_component.py\", line 227, in find_and_click_available_apartment\n    apartment_count > 0\n","steps":[{"name":"Ищем доступный апартамент в каталоге","time":{"start":1765098342866,"stop":1765098346377,"duration":3511},"status":"failed","statusMessage":"AssertionError: Апартаменты не найдены на странице - неизвестный\n","statusTrace":"  File \"D:\\a\\catalog_autotests\\catalog_autotests\\pages\\components\\navigation_component.py\", line 227, in find_and_click_available_apartment\n    apartment_count > 0\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":8,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_test_parameters::0","time":{"start":1765098346387,"stop":1765098346730,"duration":343},"status":"passed","steps":[],"attachments":[{"uid":"89b88e3b89502a60","name":"screenshot","source":"89b88e3b89502a60.png","type":"image/png","size":675981}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"new_context::0","time":{"start":1765098346731,"stop":1765098346745,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1765098346745,"stop":1765098346745,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1765098721545,"stop":1765098721547,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1765098721548,"stop":1765098721627,"duration":79},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1765098721631,"stop":1765098721652,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"environment","value":"prod"},{"name":"story","value":"Виджет апартамента - Полный функционал"},{"name":"feature","value":"Qube - Проект Arisha"},{"name":"tag","value":"ui"},{"name":"tag","value":"regression"},{"name":"tag","value":"smoke"},{"name":"parentSuite","value":"tests.ui.qube.arisha"},{"name":"suite","value":"test_arisha_apartment_widget"},{"name":"host","value":"runnervmue16e"},{"name":"thread","value":"3420-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.ui.qube.arisha.test_arisha_apartment_widget"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"Device","value":"'desktop'"},{"name":"Operating System","value":"'Windows'"},{"name":"Platform","value":"'windows-latest'"},{"name":"browser_name","value":"'chromium'"},{"name":"route_type","value":"'agent'"}],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["ui","regression","smoke"]},"source":"ae8877ddd23c77dd.json","parameterValues":["'desktop'","'Windows'","'windows-latest'","'chromium'","'agent'"]}