{"uid":"8952b0ffa95aaf6e","name":"test_cubix_download_pdf_on_agent_page[webkit]","fullName":"tests.ui.qube.cubix.test_cubix_agent_route#test_cubix_download_pdf_on_agent_page","historyId":"ebca0dbb9f0aed0226291897e92c8a0b","time":{"start":1764837211483,"stop":1764837222550,"duration":11067},"description":"Тест скачивания PDF на агентской странице проекта Cubix.","descriptionHtml":"<p>Тест скачивания PDF на агентской странице проекта Cubix.</p>\n","status":"failed","statusMessage":"AssertionError: Апартаменты не найдены на странице - неизвестный","statusTrace":"cubix_page = <pages.projects.qube.cubix_page.CubixPage object at 0x105ec1990>\n\n    @allure.feature(\"Qube - Проект Cubix\")\n    @allure.story(\"Скачивание PDF предложения\")\n    @pytest.mark.smoke\n    @pytest.mark.regression\n    @pytest.mark.ui\n    @pytest.mark.flaky(reruns=2, reruns_delay=2)\n    def test_cubix_download_pdf_on_agent_page(cubix_page):\n        \"\"\"Тест скачивания PDF на агентской странице проекта Cubix.\"\"\"\n        downloaded_file_path = \"\"\n    \n        try:\n            with allure.step(\"Открываем агентскую страницу\"):\n                cubix_page.open(route_type=\"agent\")\n    \n            with allure.step(\"Кликаем на проект Cubix\"):\n                cubix_page.map.navigate_to_project(\"cubix\")\n    \n            with allure.step(\"Ищем и кликаем на первый доступный апартамент\"):\n>               cubix_page.navigation.find_and_click_available_apartment()\n\ntests/ui/qube/cubix/test_cubix_agent_route.py:23: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <pages.components.navigation_component.NavigationComponent object at 0x105ec0b50>\nproject_name = None\n\n    def find_and_click_available_apartment(self, project_name: str = None):\n        \"\"\"\n        Найти и кликнуть на первый доступный апартамент (без замка) в каталоге.\n    \n        Args:\n            project_name: Название проекта (используется только для логирования)\n        \"\"\"\n        with allure.step(\"Ищем доступный апартамент в каталоге\"):\n            self.page.wait_for_timeout(3500)\n    \n            # Ищем все апартаменты\n            apartment_titles = self.page.locator(self.locators.ALL_APARTMENT_TITLES)\n            apartment_count = apartment_titles.count()\n    \n            # Проверяем, что апартаменты найдены на странице\n            assert (\n>               apartment_count > 0\n            ), f\"Апартаменты не найдены на странице - {project_name or 'неизвестный'}\"\nE           AssertionError: Апартаменты не найдены на странице - неизвестный\n\npages/components/navigation_component.py:223: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1764836779056,"stop":1764836779056,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1764836779056,"stop":1764836779056,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1764836779056,"stop":1764836779148,"duration":92},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1764836779056,"stop":1764836779056,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1764836779056,"stop":1764836779056,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_environment","time":{"start":1764836779148,"stop":1764836779149,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1764836779149,"stop":1764836779334,"duration":185},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1764836779334,"stop":1764836779334,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1764836779334,"stop":1764836780072,"duration":738},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1764836779334,"stop":1764836779334,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1764836779334,"stop":1764836779334,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1764836779334,"stop":1764836779334,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1764836780072,"stop":1764836780073,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1764836780072,"stop":1764836780072,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1764836780073,"stop":1764836780073,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1764836780073,"stop":1764836780073,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1764837211282,"stop":1764837211287,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1764837211282,"stop":1764837211282,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1764837211282,"stop":1764837211282,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1764837211282,"stop":1764837211282,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1764837211287,"stop":1764837211482,"duration":195},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_test_parameters","time":{"start":1764837211482,"stop":1764837211483,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"cubix_page","time":{"start":1764837211483,"stop":1764837211483,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Тест скачивания PDF на агентской странице проекта Cubix.","status":"failed","statusMessage":"AssertionError: Апартаменты не найдены на странице - неизвестный","statusTrace":"cubix_page = <pages.projects.qube.cubix_page.CubixPage object at 0x105ec1990>\n\n    @allure.feature(\"Qube - Проект Cubix\")\n    @allure.story(\"Скачивание PDF предложения\")\n    @pytest.mark.smoke\n    @pytest.mark.regression\n    @pytest.mark.ui\n    @pytest.mark.flaky(reruns=2, reruns_delay=2)\n    def test_cubix_download_pdf_on_agent_page(cubix_page):\n        \"\"\"Тест скачивания PDF на агентской странице проекта Cubix.\"\"\"\n        downloaded_file_path = \"\"\n    \n        try:\n            with allure.step(\"Открываем агентскую страницу\"):\n                cubix_page.open(route_type=\"agent\")\n    \n            with allure.step(\"Кликаем на проект Cubix\"):\n                cubix_page.map.navigate_to_project(\"cubix\")\n    \n            with allure.step(\"Ищем и кликаем на первый доступный апартамент\"):\n>               cubix_page.navigation.find_and_click_available_apartment()\n\ntests/ui/qube/cubix/test_cubix_agent_route.py:23: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <pages.components.navigation_component.NavigationComponent object at 0x105ec0b50>\nproject_name = None\n\n    def find_and_click_available_apartment(self, project_name: str = None):\n        \"\"\"\n        Найти и кликнуть на первый доступный апартамент (без замка) в каталоге.\n    \n        Args:\n            project_name: Название проекта (используется только для логирования)\n        \"\"\"\n        with allure.step(\"Ищем доступный апартамент в каталоге\"):\n            self.page.wait_for_timeout(3500)\n    \n            # Ищем все апартаменты\n            apartment_titles = self.page.locator(self.locators.ALL_APARTMENT_TITLES)\n            apartment_count = apartment_titles.count()\n    \n            # Проверяем, что апартаменты найдены на странице\n            assert (\n>               apartment_count > 0\n            ), f\"Апартаменты не найдены на странице - {project_name or 'неизвестный'}\"\nE           AssertionError: Апартаменты не найдены на странице - неизвестный\n\npages/components/navigation_component.py:223: AssertionError","steps":[{"name":"Открываем агентскую страницу","time":{"start":1764837211484,"stop":1764837216369,"duration":4885},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаем на проект Cubix","time":{"start":1764837216370,"stop":1764837219003,"duration":2633},"status":"passed","steps":[{"name":"Навигация к проекту CUBIX","time":{"start":1764837216370,"stop":1764837219003,"duration":2633},"status":"passed","steps":[{"name":"Ожидаем загрузки карты","time":{"start":1764837216370,"stop":1764837218427,"duration":2057},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаем на проект CUBIX","time":{"start":1764837218427,"stop":1764837218519,"duration":92},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаем на Explore Project для CUBIX","time":{"start":1764837218519,"stop":1764837219003,"duration":484},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Ищем и кликаем на первый доступный апартамент","time":{"start":1764837219003,"stop":1764837222550,"duration":3547},"status":"failed","statusMessage":"AssertionError: Апартаменты не найдены на странице - неизвестный\n","statusTrace":"  File \"/Users/runner/work/catalog_autotests/catalog_autotests/tests/ui/qube/cubix/test_cubix_agent_route.py\", line 23, in test_cubix_download_pdf_on_agent_page\n    cubix_page.navigation.find_and_click_available_apartment()\n  File \"/Users/runner/work/catalog_autotests/catalog_autotests/pages/components/navigation_component.py\", line 223, in find_and_click_available_apartment\n    apartment_count > 0\n","steps":[{"name":"Ищем доступный апартамент в каталоге","time":{"start":1764837219003,"stop":1764837222550,"duration":3547},"status":"failed","statusMessage":"AssertionError: Апартаменты не найдены на странице - неизвестный\n","statusTrace":"  File \"/Users/runner/work/catalog_autotests/catalog_autotests/pages/components/navigation_component.py\", line 223, in find_and_click_available_apartment\n    apartment_count > 0\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":8,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_test_parameters::0","time":{"start":1764837222554,"stop":1764837222598,"duration":44},"status":"passed","steps":[],"attachments":[{"uid":"33fc664809b3ef37","name":"screenshot","source":"33fc664809b3ef37.png","type":"image/png","size":38737}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"new_context::0","time":{"start":1764837222599,"stop":1764837222606,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1764837222606,"stop":1764837222606,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1764838207056,"stop":1764838207058,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1764838207059,"stop":1764838207104,"duration":45},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1764838207112,"stop":1764838207121,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"environment","value":"prod"},{"name":"feature","value":"Qube - Проект Cubix"},{"name":"story","value":"Скачивание PDF предложения"},{"name":"tag","value":"ui"},{"name":"tag","value":"regression"},{"name":"tag","value":"smoke"},{"name":"parentSuite","value":"tests.ui.qube.cubix"},{"name":"suite","value":"test_cubix_agent_route"},{"name":"host","value":"sjc20-cw713-b5872afc-98ec-4331-81af-e1bb11cc2375-C25E5D5D4240.local"},{"name":"thread","value":"9831-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.ui.qube.cubix.test_cubix_agent_route"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"Device","value":"'desktop'"},{"name":"Operating System","value":"'macOS'"},{"name":"Platform","value":"'macos-latest'"},{"name":"browser_name","value":"'webkit'"}],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["ui","regression","smoke"]},"source":"8952b0ffa95aaf6e.json","parameterValues":["'desktop'","'macOS'","'macos-latest'","'webkit'"]}