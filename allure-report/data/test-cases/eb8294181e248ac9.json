{"uid":"eb8294181e248ac9","name":"test_cubix_download_pdf_on_agent_page[firefox]","fullName":"tests.ui.qube.cubix.test_cubix_agent_route#test_cubix_download_pdf_on_agent_page","historyId":"cda6cf622d91639b5c4682191be17eb4","time":{"start":1761639409606,"stop":1761639439607,"duration":30001},"description":"Тест скачивания PDF на агентской странице проекта Cubix.","descriptionHtml":"<p>Тест скачивания PDF на агентской странице проекта Cubix.</p>\n","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Page.goto: Timeout 30000ms exceeded.\nCall log:\n  - navigating to \"https://virtualtours.qbd.ae/agent/map\", waiting until \"load\"","statusTrace":"cubix_page = <pages.projects.qube.cubix_page.CubixPage object at 0x7f13d4f5a1d0>\n\n    @allure.feature(\"Qube - Проект Cubix\")\n    @allure.story(\"Скачивание PDF предложения\")\n    @pytest.mark.smoke\n    @pytest.mark.regression\n    @pytest.mark.ui\n    @pytest.mark.flaky(reruns=2, reruns_delay=2)\n    def test_cubix_download_pdf_on_agent_page(cubix_page):\n        \"\"\"Тест скачивания PDF на агентской странице проекта Cubix.\"\"\"\n        downloaded_file_path = \"\"\n    \n        try:\n            with allure.step(\"Открываем агентскую страницу\"):\n>               cubix_page.open(route_type=\"agent\")\n\ntests/ui/qube/cubix/test_cubix_agent_route.py:17: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <pages.projects.qube.cubix_page.CubixPage object at 0x7f13d4f5a1d0>\npath = '', route_type = 'agent'\n\n    def open(self, path: str = \"\", route_type: str = None):\n        \"\"\"\n        Открыть страницу.\n    \n        Args:\n            path: Дополнительный путь к базовому URL\n            route_type: Тип роута - \"client\", \"agent\" или \"map\". Если указан, изменяет URL соответственно.\n        \"\"\"\n        # Определяем URL\n        url = self.base_url\n    \n        # Если указан route_type, изменяем URL\n        if route_type and route_type != \"map\":\n            # Для agent и client меняем /map на /agent/map или /client/map\n            if \"/map\" in url and route_type in [\"agent\", \"client\"]:\n                url = url.replace(\"/map\", f\"/{route_type}/map\")\n    \n        # Добавляем дополнительный путь если есть\n        if path:\n            url = f\"{url.rstrip('/')}/{path.lstrip('/')}\"\n    \n>       self.page.goto(url)\n\npages/base_page.py:82: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Page url='about:blank'>, url = 'https://virtualtours.qbd.ae/agent/map'\n\n    def goto(\n        self,\n        url: str,\n        *,\n        timeout: typing.Optional[float] = None,\n        wait_until: typing.Optional[\n            Literal[\"commit\", \"domcontentloaded\", \"load\", \"networkidle\"]\n        ] = None,\n        referer: typing.Optional[str] = None,\n    ) -> typing.Optional[\"Response\"]:\n        \"\"\"Page.goto\n    \n        Returns the main resource response. In case of multiple redirects, the navigation will resolve with the first\n        non-redirect response.\n    \n        The method will throw an error if:\n        - there's an SSL error (e.g. in case of self-signed certificates).\n        - target URL is invalid.\n        - the `timeout` is exceeded during navigation.\n        - the remote server does not respond or is unreachable.\n        - the main resource failed to load.\n    \n        The method will not throw an error when any valid HTTP status code is returned by the remote server, including 404\n        \\\"Not Found\\\" and 500 \\\"Internal Server Error\\\".  The status code for such responses can be retrieved by calling\n        `response.status()`.\n    \n        **NOTE** The method either throws an error or returns a main resource response. The only exceptions are navigation\n        to `about:blank` or navigation to the same URL with a different hash, which would succeed and return `null`.\n    \n        **NOTE** Headless mode doesn't support navigation to a PDF document. See the\n        [upstream issue](https://bugs.chromium.org/p/chromium/issues/detail?id=761295).\n    \n        Parameters\n        ----------\n        url : str\n            URL to navigate page to. The url should include scheme, e.g. `https://`. When a `baseURL` via the context options\n            was provided and the passed URL is a path, it gets merged via the\n            [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor.\n        timeout : Union[float, None]\n            Maximum operation time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can\n            be changed by using the `browser_context.set_default_navigation_timeout()`,\n            `browser_context.set_default_timeout()`, `page.set_default_navigation_timeout()` or\n            `page.set_default_timeout()` methods.\n        wait_until : Union[\"commit\", \"domcontentloaded\", \"load\", \"networkidle\", None]\n            When to consider operation succeeded, defaults to `load`. Events can be either:\n            - `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.\n            - `'load'` - consider operation to be finished when the `load` event is fired.\n            - `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for\n              at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.\n            - `'commit'` - consider operation to be finished when network response is received and the document started\n              loading.\n        referer : Union[str, None]\n            Referer header value. If provided it will take preference over the referer header value set by\n            `page.set_extra_http_headers()`.\n    \n        Returns\n        -------\n        Union[Response, None]\n        \"\"\"\n    \n        return mapping.from_impl_nullable(\n>           self._sync(\n                self._impl_obj.goto(\n                    url=url, timeout=timeout, waitUntil=wait_until, referer=referer\n                )\n            )\n        )\n\n/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/playwright/sync_api/_generated.py:9019: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Page url='about:blank'>, url = 'https://virtualtours.qbd.ae/agent/map'\ntimeout = None, waitUntil = None, referer = None\n\n    async def goto(\n        self,\n        url: str,\n        timeout: float = None,\n        waitUntil: DocumentLoadState = None,\n        referer: str = None,\n    ) -> Optional[Response]:\n>       return await self._main_frame.goto(**locals_to_params(locals()))\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/playwright/_impl/_page.py:556: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Frame name= url='about:blank'>\nurl = 'https://virtualtours.qbd.ae/agent/map', timeout = None, waitUntil = None\nreferer = None\n\n    async def goto(\n        self,\n        url: str,\n        timeout: float = None,\n        waitUntil: DocumentLoadState = None,\n        referer: str = None,\n    ) -> Optional[Response]:\n        return cast(\n            Optional[Response],\n            from_nullable_channel(\n>               await self._channel.send(\n                    \"goto\", self._navigation_timeout, locals_to_params(locals())\n                )\n            ),\n        )\n\n/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/playwright/_impl/_frame.py:153: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Channel object at 0x7f13d31c6490>\nmethod = 'goto'\ntimeout_calculator = <bound method Frame._navigation_timeout of <Frame name= url='about:blank'>>\nparams = {'timeout': 30000, 'url': 'https://virtualtours.qbd.ae/agent/map'}\nis_internal = False, title = None\n\n    async def send(\n        self,\n        method: str,\n        timeout_calculator: TimeoutCalculator,\n        params: Dict = None,\n        is_internal: bool = False,\n        title: str = None,\n    ) -> Any:\n>       return await self._connection.wrap_api_call(\n            lambda: self._inner_send(method, timeout_calculator, params, False),\n            is_internal,\n            title,\n        )\n\n/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/playwright/_impl/_connection.py:69: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x7f13d443d050>\ncb = <function Channel.send.<locals>.<lambda> at 0x7f13d4fc6480>\nis_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Page.goto: Timeout 30000ms exceeded.\nE           Call log:\nE             - navigating to \"https://virtualtours.qbd.ae/agent/map\", waiting until \"load\"\n\n/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/playwright/_impl/_connection.py:558: TimeoutError","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1761638908030,"stop":1761638908030,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1761638908030,"stop":1761638908094,"duration":64},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1761638908030,"stop":1761638908030,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761638908094,"stop":1761638908094,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1761638908095,"stop":1761638908396,"duration":301},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1761638908095,"stop":1761638908095,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_environment","time":{"start":1761638908095,"stop":1761638908095,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1761638908396,"stop":1761638908396,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1761638908396,"stop":1761638908396,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1761638908397,"stop":1761638908397,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1761638908397,"stop":1761638909030,"duration":633},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1761638908397,"stop":1761638908397,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1761638909030,"stop":1761638909030,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761638909030,"stop":1761638909030,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761638909030,"stop":1761638909030,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1761638909030,"stop":1761638909030,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1761639409440,"stop":1761639409446,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1761639409440,"stop":1761639409440,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1761639409440,"stop":1761639409440,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1761639409440,"stop":1761639409440,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1761639409447,"stop":1761639409604,"duration":157},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_test_parameters","time":{"start":1761639409605,"stop":1761639409605,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"cubix_page","time":{"start":1761639409605,"stop":1761639409605,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Тест скачивания PDF на агентской странице проекта Cubix.","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Page.goto: Timeout 30000ms exceeded.\nCall log:\n  - navigating to \"https://virtualtours.qbd.ae/agent/map\", waiting until \"load\"","statusTrace":"cubix_page = <pages.projects.qube.cubix_page.CubixPage object at 0x7f13d4f5a1d0>\n\n    @allure.feature(\"Qube - Проект Cubix\")\n    @allure.story(\"Скачивание PDF предложения\")\n    @pytest.mark.smoke\n    @pytest.mark.regression\n    @pytest.mark.ui\n    @pytest.mark.flaky(reruns=2, reruns_delay=2)\n    def test_cubix_download_pdf_on_agent_page(cubix_page):\n        \"\"\"Тест скачивания PDF на агентской странице проекта Cubix.\"\"\"\n        downloaded_file_path = \"\"\n    \n        try:\n            with allure.step(\"Открываем агентскую страницу\"):\n>               cubix_page.open(route_type=\"agent\")\n\ntests/ui/qube/cubix/test_cubix_agent_route.py:17: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <pages.projects.qube.cubix_page.CubixPage object at 0x7f13d4f5a1d0>\npath = '', route_type = 'agent'\n\n    def open(self, path: str = \"\", route_type: str = None):\n        \"\"\"\n        Открыть страницу.\n    \n        Args:\n            path: Дополнительный путь к базовому URL\n            route_type: Тип роута - \"client\", \"agent\" или \"map\". Если указан, изменяет URL соответственно.\n        \"\"\"\n        # Определяем URL\n        url = self.base_url\n    \n        # Если указан route_type, изменяем URL\n        if route_type and route_type != \"map\":\n            # Для agent и client меняем /map на /agent/map или /client/map\n            if \"/map\" in url and route_type in [\"agent\", \"client\"]:\n                url = url.replace(\"/map\", f\"/{route_type}/map\")\n    \n        # Добавляем дополнительный путь если есть\n        if path:\n            url = f\"{url.rstrip('/')}/{path.lstrip('/')}\"\n    \n>       self.page.goto(url)\n\npages/base_page.py:82: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Page url='about:blank'>, url = 'https://virtualtours.qbd.ae/agent/map'\n\n    def goto(\n        self,\n        url: str,\n        *,\n        timeout: typing.Optional[float] = None,\n        wait_until: typing.Optional[\n            Literal[\"commit\", \"domcontentloaded\", \"load\", \"networkidle\"]\n        ] = None,\n        referer: typing.Optional[str] = None,\n    ) -> typing.Optional[\"Response\"]:\n        \"\"\"Page.goto\n    \n        Returns the main resource response. In case of multiple redirects, the navigation will resolve with the first\n        non-redirect response.\n    \n        The method will throw an error if:\n        - there's an SSL error (e.g. in case of self-signed certificates).\n        - target URL is invalid.\n        - the `timeout` is exceeded during navigation.\n        - the remote server does not respond or is unreachable.\n        - the main resource failed to load.\n    \n        The method will not throw an error when any valid HTTP status code is returned by the remote server, including 404\n        \\\"Not Found\\\" and 500 \\\"Internal Server Error\\\".  The status code for such responses can be retrieved by calling\n        `response.status()`.\n    \n        **NOTE** The method either throws an error or returns a main resource response. The only exceptions are navigation\n        to `about:blank` or navigation to the same URL with a different hash, which would succeed and return `null`.\n    \n        **NOTE** Headless mode doesn't support navigation to a PDF document. See the\n        [upstream issue](https://bugs.chromium.org/p/chromium/issues/detail?id=761295).\n    \n        Parameters\n        ----------\n        url : str\n            URL to navigate page to. The url should include scheme, e.g. `https://`. When a `baseURL` via the context options\n            was provided and the passed URL is a path, it gets merged via the\n            [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor.\n        timeout : Union[float, None]\n            Maximum operation time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can\n            be changed by using the `browser_context.set_default_navigation_timeout()`,\n            `browser_context.set_default_timeout()`, `page.set_default_navigation_timeout()` or\n            `page.set_default_timeout()` methods.\n        wait_until : Union[\"commit\", \"domcontentloaded\", \"load\", \"networkidle\", None]\n            When to consider operation succeeded, defaults to `load`. Events can be either:\n            - `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.\n            - `'load'` - consider operation to be finished when the `load` event is fired.\n            - `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for\n              at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.\n            - `'commit'` - consider operation to be finished when network response is received and the document started\n              loading.\n        referer : Union[str, None]\n            Referer header value. If provided it will take preference over the referer header value set by\n            `page.set_extra_http_headers()`.\n    \n        Returns\n        -------\n        Union[Response, None]\n        \"\"\"\n    \n        return mapping.from_impl_nullable(\n>           self._sync(\n                self._impl_obj.goto(\n                    url=url, timeout=timeout, waitUntil=wait_until, referer=referer\n                )\n            )\n        )\n\n/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/playwright/sync_api/_generated.py:9019: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Page url='about:blank'>, url = 'https://virtualtours.qbd.ae/agent/map'\ntimeout = None, waitUntil = None, referer = None\n\n    async def goto(\n        self,\n        url: str,\n        timeout: float = None,\n        waitUntil: DocumentLoadState = None,\n        referer: str = None,\n    ) -> Optional[Response]:\n>       return await self._main_frame.goto(**locals_to_params(locals()))\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/playwright/_impl/_page.py:556: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Frame name= url='about:blank'>\nurl = 'https://virtualtours.qbd.ae/agent/map', timeout = None, waitUntil = None\nreferer = None\n\n    async def goto(\n        self,\n        url: str,\n        timeout: float = None,\n        waitUntil: DocumentLoadState = None,\n        referer: str = None,\n    ) -> Optional[Response]:\n        return cast(\n            Optional[Response],\n            from_nullable_channel(\n>               await self._channel.send(\n                    \"goto\", self._navigation_timeout, locals_to_params(locals())\n                )\n            ),\n        )\n\n/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/playwright/_impl/_frame.py:153: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Channel object at 0x7f13d31c6490>\nmethod = 'goto'\ntimeout_calculator = <bound method Frame._navigation_timeout of <Frame name= url='about:blank'>>\nparams = {'timeout': 30000, 'url': 'https://virtualtours.qbd.ae/agent/map'}\nis_internal = False, title = None\n\n    async def send(\n        self,\n        method: str,\n        timeout_calculator: TimeoutCalculator,\n        params: Dict = None,\n        is_internal: bool = False,\n        title: str = None,\n    ) -> Any:\n>       return await self._connection.wrap_api_call(\n            lambda: self._inner_send(method, timeout_calculator, params, False),\n            is_internal,\n            title,\n        )\n\n/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/playwright/_impl/_connection.py:69: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x7f13d443d050>\ncb = <function Channel.send.<locals>.<lambda> at 0x7f13d4fc6480>\nis_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Page.goto: Timeout 30000ms exceeded.\nE           Call log:\nE             - navigating to \"https://virtualtours.qbd.ae/agent/map\", waiting until \"load\"\n\n/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/playwright/_impl/_connection.py:558: TimeoutError","steps":[{"name":"Открываем агентскую страницу","time":{"start":1761639409606,"stop":1761639439607,"duration":30001},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Page.goto: Timeout 30000ms exceeded.\nCall log:\n  - navigating to \"https://virtualtours.qbd.ae/agent/map\", waiting until \"load\"\n\n","statusTrace":"  File \"/home/runner/work/catalog_autotests/catalog_autotests/tests/ui/qube/cubix/test_cubix_agent_route.py\", line 17, in test_cubix_download_pdf_on_agent_page\n    cubix_page.open(route_type=\"agent\")\n  File \"/home/runner/work/catalog_autotests/catalog_autotests/pages/base_page.py\", line 82, in open\n    self.page.goto(url)\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/playwright/sync_api/_generated.py\", line 9019, in goto\n    self._sync(\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/playwright/_impl/_page.py\", line 556, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/playwright/_impl/_frame.py\", line 153, in goto\n    await self._channel.send(\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/playwright/_impl/_connection.py\", line 69, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/playwright/_impl/_connection.py\", line 558, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_test_parameters::0","time":{"start":1761639439741,"stop":1761639439789,"duration":48},"status":"passed","steps":[],"attachments":[{"uid":"40bf48a47030b63c","name":"screenshot","source":"40bf48a47030b63c.png","type":"image/png","size":38663}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"new_context::0","time":{"start":1761639439790,"stop":1761639439800,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1761639439800,"stop":1761639439801,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1761641045874,"stop":1761641045874,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1761641045875,"stop":1761641046029,"duration":154},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1761641046031,"stop":1761641046038,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"environment","value":"prod"},{"name":"story","value":"Скачивание PDF предложения"},{"name":"feature","value":"Qube - Проект Cubix"},{"name":"tag","value":"ui"},{"name":"tag","value":"regression"},{"name":"tag","value":"smoke"},{"name":"parentSuite","value":"tests.ui.qube.cubix"},{"name":"suite","value":"test_cubix_agent_route"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"5188-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.ui.qube.cubix.test_cubix_agent_route"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"Device","value":"'desktop'"},{"name":"Operating System","value":"'Linux'"},{"name":"Platform","value":"'ubuntu-latest'"},{"name":"browser_name","value":"'firefox'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"49ec12b3d9475c54","status":"broken","statusDetails":"playwright._impl._errors.TimeoutError: Page.goto: Timeout 30000ms exceeded.\nCall log:\n  - navigating to \"https://virtualtours.qbd.ae/agent/map\", waiting until \"load\"","time":{"start":1761639377239,"stop":1761639407240,"duration":30001}},{"uid":"9d7b551b6bec0bfd","status":"broken","statusDetails":"playwright._impl._errors.TimeoutError: Page.goto: Timeout 30000ms exceeded.\nCall log:\n  - navigating to \"https://virtualtours.qbd.ae/agent/map\", waiting until \"load\"","time":{"start":1761639344859,"stop":1761639374860,"duration":30001}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":3,"skipped":0,"passed":40,"unknown":0,"total":43},"items":[{"uid":"a6892230a82c5736","status":"passed","time":{"start":1761552564004,"stop":1761552586967,"duration":22963}},{"uid":"a5e17ef9a84b9db4","status":"passed","time":{"start":1761466149688,"stop":1761466171649,"duration":21961}},{"uid":"fc73b00984feb7c7","status":"passed","time":{"start":1761379704158,"stop":1761379724819,"duration":20661}},{"uid":"6ded323f42f416e8","status":"broken","statusDetails":"playwright._impl._errors.TimeoutError: Locator.wait_for: Timeout 10000ms exceeded.\nCall log:\n  - waiting for locator(\"//button[.//span[text() = 'Download PDF']]\") to be visible","time":{"start":1761293356942,"stop":1761293377685,"duration":20743}},{"uid":"f1f7fe9e209f2ccc","status":"passed","time":{"start":1761220537388,"stop":1761220559828,"duration":22440}},{"uid":"842af878fcdaaa4e","status":"passed","time":{"start":1761206936463,"stop":1761206958267,"duration":21804}},{"uid":"286e5222b55a7da5","status":"passed","time":{"start":1761140680621,"stop":1761140703023,"duration":22402}},{"uid":"497a19aabac03227","status":"passed","time":{"start":1761120539910,"stop":1761120560052,"duration":20142}},{"uid":"91d245aea1c82478","status":"broken","statusDetails":"playwright._impl._errors.TimeoutError: Locator.wait_for: Timeout 10000ms exceeded.\nCall log:\n  - waiting for locator(\"//button[.//span[text() = 'Download PDF']]\") to be visible","time":{"start":1761049658326,"stop":1761049678195,"duration":19869}},{"uid":"823defe6dfe165b2","status":"passed","time":{"start":1761043268307,"stop":1761043290045,"duration":21738}},{"uid":"f8688e88eec7b43e","status":"passed","time":{"start":1761042754232,"stop":1761042775937,"duration":21705}},{"uid":"bae347752668d85a","status":"passed","time":{"start":1761040966710,"stop":1761040989816,"duration":23106}},{"uid":"294b663e29042bf","status":"passed","time":{"start":1761034153097,"stop":1761034175573,"duration":22476}},{"uid":"f0380296e306ac3b","status":"passed","time":{"start":1760967571909,"stop":1760967594022,"duration":22113}},{"uid":"a7e587bb84e77bbb","status":"passed","time":{"start":1760947829917,"stop":1760947849603,"duration":19686}},{"uid":"e42a5cd4cc5a65e3","status":"passed","time":{"start":1760861376135,"stop":1760861396076,"duration":19941}},{"uid":"ed08b0b008fcb6ba","status":"passed","time":{"start":1760774987133,"stop":1760775007719,"duration":20586}},{"uid":"6b4e94c5dd245ffd","status":"passed","time":{"start":1760688568066,"stop":1760688589199,"duration":21133}},{"uid":"c8d79698faa3b33a","status":"passed","time":{"start":1760619732224,"stop":1760619754819,"duration":22595}},{"uid":"edec786c4894b841","status":"passed","time":{"start":1760616638808,"stop":1760616658132,"duration":19324}}]},"tags":["ui","regression","smoke"]},"source":"eb8294181e248ac9.json","parameterValues":["'desktop'","'Linux'","'ubuntu-latest'","'firefox'"]}